<?xml version='1.0' encoding='UTF-8'?> 
<?xml-stylesheet type='text/xsl' href='junit.xsl'?> 
<testsuites>
  <meta_test_info page_active='no-links' link_url=''/>
  <testsuite name='pre_suite' tests='7' errors='0' failures='0' skipped='2' pending='0' total='7' time='89.850269'>
    <properties>
      <property name='project' value='Beaker'/>
      <property name='department' value='unknown'/>
      <property name='created_by' value='rishi.javia'/>
      <property name='host_tags' value='{}'/>
      <property name='openstack_api_key' value=''/>
      <property name='openstack_username' value=''/>
      <property name='openstack_auth_url' value='/tokens'/>
      <property name='openstack_tenant' value=''/>
      <property name='openstack_keyname' value=''/>
      <property name='openstack_network' value=''/>
      <property name='openstack_region' value=''/>
      <property name='openstack_volume_support' value='true'/>
      <property name='jenkins_build_url' value=''/>
      <property name='validate' value='true'/>
      <property name='configure' value='true'/>
      <property name='log_level' value='debug'/>
      <property name='trace_limit' value='10'/>
      <property name='master-start-curl-retries' value='30'/>
      <property name='masterless' value='false'/>
      <property name='options_file' value='merged_options.rb'/>
      <property name='type' value='aio'/>
      <property name='provision' value='true'/>
      <property name='preserve_hosts' value='onfail'/>
      <property name='root_keys' value='false'/>
      <property name='quiet' value='false'/>
      <property name='project_root' value='/Users/rishi.javia/Documents/beaker/lib/beaker'/>
      <property name='xml_dir' value='junit'/>
      <property name='xml_file' value='beaker_junit.xml'/>
      <property name='xml_time' value='beaker_times.xml'/>
      <property name='xml_time_enabled' value='false'/>
      <property name='xml_stylesheet' value='junit.xsl'/>
      <property name='default_log_prefix' value='beaker_logs'/>
      <property name='log_dir' value='log'/>
      <property name='log_sut_event' value='sut.log'/>
      <property name='color' value='true'/>
      <property name='dry_run' value='false'/>
      <property name='test_tag_and' value='[]'/>
      <property name='test_tag_or' value='[]'/>
      <property name='test_tag_exclude' value='[]'/>
      <property name='timeout' value='900'/>
      <property name='fail_mode' value='slow'/>
      <property name='accept_all_exit_codes' value='false'/>
      <property name='timesync' value='false'/>
      <property name='disable_iptables' value='false'/>
      <property name='set_env' value='true'/>
      <property name='disable_updates' value='true'/>
      <property name='repo_proxy' value='true'/>
      <property name='package_proxy' value='false'/>
      <property name='add_el_extras' value='false'/>
      <property name='epel_url' value='http://dl.fedoraproject.org/pub/epel'/>
      <property name='epel_url_archive' value='http://archive.fedoraproject.org/pub/archive/epel'/>
      <property name='consoleport' value='443'/>
      <property name='pe_dir' value='/opt/enterprise/dists'/>
      <property name='pe_version_file' value='LATEST'/>
      <property name='pe_version_file_win' value='LATEST-win'/>
      <property name='host_env' value='{}'/>
      <property name='host_name_prefix' value=''/>
      <property name='ssh_env_file' value='~/.ssh/environment'/>
      <property name='profile_d_env_file' value='/etc/profile.d/beaker_env.sh'/>
      <property name='dot_fog' value='/Users/rishi.javia/.fog'/>
      <property name='ec2_yaml' value='config/image_templates/ec2.yaml'/>
      <property name='help' value='false'/>
      <property name='collect_perf_data' value='none'/>
      <property name='puppetdb_port_ssl' value='8081'/>
      <property name='puppetdb_port_nonssl' value='8080'/>
      <property name='puppetserver_port' value='8140'/>
      <property name='nodeclassifier_port' value='4433'/>
      <property name='cache_files_locally' value='false'/>
      <property name='aws_keyname_modifier' value='7069933815'/>
      <property name='run_in_parallel' value='[]'/>
      <property name='ssh' value='{:config=&gt;false, :paranoid=&gt;false, :auth_methods=&gt;[&quot;publickey&quot;], :port=&gt;22, :forward_agent=&gt;true, :keys=&gt;[&quot;id_rsa_acceptance&quot;, &quot;/Users/rishi.javia/.ssh/id_rsa-acceptance&quot;], :user_known_hosts_file=&gt;&quot;/Users/rishi.javia/.ssh/known_hosts&quot;, :keepalive=&gt;true}'/>
      <property name='tests' value='[&quot;tests/reports/cached_catalog_status_in_report.rb&quot;, &quot;tests/reports/corrective_change_new_resource.rb&quot;, &quot;tests/reports/corrective_change_outside_puppet.rb&quot;, &quot;tests/reports/corrective_change_via_puppet.rb&quot;, &quot;tests/reports/failover_master.rb&quot;, &quot;tests/reports/finalized_on_cycle.rb&quot;, &quot;tests/reports/submission.rb&quot;]'/>
      <property name='pre_suite' value='[&quot;setup/common/pre-suite/000-delete-puppet-when-none.rb&quot;, &quot;setup/aio/pre-suite/010_Install.rb&quot;, &quot;setup/aio/pre-suite/020_InstallCumulusModules.rb&quot;, &quot;setup/aio/pre-suite/021_InstallAristaModule.rb&quot;, &quot;setup/common/pre-suite/025_StopFirewall.rb&quot;, &quot;setup/common/pre-suite/040_ValidateSignCert.rb&quot;, &quot;setup/aio/pre-suite/045_EnsureMasterStarted.rb&quot;]'/>
      <property name='is_puppetserver' value='true'/>
      <property name='use-service' value='true'/>
      <property name='puppetservice' value='puppetserver'/>
      <property name='puppetserver-confdir' value='/etc/puppetlabs/puppetserver/conf.d'/>
      <property name='puppetserver-config' value='/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf'/>
      <property name='load_path' value='[&quot;./lib&quot;]'/>
      <property name='xml' value='true'/>
      <property name='forge_host' value='forge-aio01-petest.puppetlabs.com'/>
      <property name='hosts_file' value='/Users/rishi.javia/Documents/puppet/acceptance/centos7-pe.yml'/>
      <property name='command_line' value='/Users/rishi.javia/Documents/puppet/acceptance/vendor/bundle/ruby/2.2.0/bin/beaker --options-file merged_options.rb --hosts centos7-pe.yml --tests=tests/reports'/>
      <property name='HOSTS' value='{:&quot;centos7-64-1&quot;=&gt;{:pe_dir=&gt;nil, :pe_ver=&gt;nil, :pe_upgrade_dir=&gt;nil, :pe_upgrade_ver=&gt;nil, :hypervisor=&gt;&quot;vmpooler&quot;, :platform=&gt;&quot;el-7-x86_64&quot;, :template=&gt;&quot;centos-7-x86_64&quot;, :roles=&gt;[&quot;master&quot;, &quot;agent&quot;, &quot;dashboard&quot;, &quot;database&quot;, &quot;default&quot;], :host_tags=&gt;{}}}'/>
      <property name='nfs_server' value='none'/>
      <property name='pooling_api' value='http://vmpooler.delivery.puppetlabs.net/'/>
      <property name='home' value='/Users/rishi.javia'/>
      <property name='helper' value='[]'/>
      <property name='post_suite' value='[]'/>
      <property name='install' value='[]'/>
      <property name='pre_cleanup' value='[]'/>
      <property name='modules' value='[]'/>
      <property name='logger' value='#&lt;Beaker::Logger:0x007ff359404f58&gt;'/>
      <property name='timestamp' value='2017-08-08 19:19:20 -0700'/>
      <property name='beaker_version' value='3.21.1'/>
      <property name='log_prefix' value='centos7-pe'/>
      <property name='xml_dated_dir' value='junit/centos7-pe/2017-08-08_19_19_20'/>
      <property name='log_dated_dir' value='log/centos7-pe/2017-08-08_19_19_20'/>
      <property name='logger_sut' value='#&lt;Beaker::Logger:0x007ff359404d28&gt;'/>
    </properties>
    <testcase classname='setup/common/pre-suite' name='000-delete-puppet-when-none.rb' time='0.000381'>
      <system-out>
        <![CDATA[
Expunge puppet bits if hypervisor is none
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='setup/aio/pre-suite' name='010_Install.rb' time='30.868138'>
      <system-out>
        <![CDATA[
Install Packages

* Install puppet-agent...

* Install puppetserver...
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:26$ curl -o /etc/yum.repos.d/pl-puppetserver-latest-el-7-x86_64.repo http://nightlies.puppetlabs.com/puppetserver-latest//repo_configs/rpm/pl-puppetserver-latest-el-7-x86_64.repo
      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                     Dload  Upload   Total   Spent    Left  Speed
      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0    100   224  100   224    0     0   1964      0 --:--:-- --:--:-- --:--:--  1982
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.15 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:26$ curl -o /etc/yum.repos.d/pl-puppet-agent-d33a1fddd412fce059fdc68127a0b9b31c0bfe98-el-7-x86_64.repo http://builds.puppetlabs.lan/puppet-agent/d33a1fddd412fce059fdc68127a0b9b31c0bfe98/repo_configs/rpm/pl-puppet-agent-d33a1fddd412fce059fdc68127a0b9b31c0bfe98-el-7-x86_64.repo
      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                     Dload  Upload   Total   Spent    Left  Speed
      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0    100   284  100   284    0     0  37008      0 --:--:-- --:--:-- --    :--:-- 40571
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
  Installing puppetserver
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:26$ yum -y  install puppetserver
    Loaded plugins: fastestmirror
    Loading mirror speeds from cached hostfile
    Resolving Dependencies
    --> Running transaction check
    ---> Package puppetserver.noarch 0:5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7 will be installed
    --> Processing Dependency: puppet-agent >= 4.99.0 for package: puppetserver-5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7.noarch
    --> Processing Dependency: java-1.8.0-openjdk-headless for package: puppetserver-5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7.noarch
    --> Running transaction check
    ---> Package java-1.8.0-openjdk-headless.x86_64 1:1.8.0.141-1.b16.el7_3 will be installed
    --> Processing Dependency: tzdata-java >= 2015d for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: nss(x86-64) >= 3.28.4 for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: copy-jdk-configs >= 1.1-3 for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: chkconfig >= 1.7 for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: chkconfig >= 1.7 for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: lksctp-tools(x86-64) for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: libjpeg.so.62(LIBJPEG_6.2)(64bit) for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: jpackage-utils for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    --> Processing Dependency: libjpeg.so.62()(64bit) for package: 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_64
    ---> Package puppet-agent.x86_64 0:4.99.0.597.gd33a1fd-1.el7 will be installed
    --> Running transaction check
    ---> Package chkconfig.x86_64 0:1.3.61-5.el7 will be updated
    ---> Package chkconfig.x86_64 0:1.7.2-1.el7_3.1 will be an update
    ---> Package copy-jdk-configs.noarch 0:1.2-1.el7 will be installed
    ---> Package javapackages-tools.noarch 0:3.4.1-11.el7 will be installed
    --> Processing Dependency: python-javapackages = 3.4.1-11.el7 for package: javapackages-tools-3.4.1-11.el7.noarch
    --> Processing Dependency: libxslt for package: javapackages-tools-3.4.1-11.el7.noarch
    ---> Package libjpeg-turbo.x86_64 0:1.2.90-5.el7 will be installed
    ---> Package lksctp-tools.x86_64 0:1.0.17-2.el7 will be installed
    ---> Package nss.x86_64 0:3.19.1-18.el7 will be updated
    --> Processing Dependency: nss = 3.19.1-18.el7 for package: nss-sysinit-3.19.1-18.el7.x86_64
    --> Processing Dependency: nss(x86-64) = 3.19.1-18.el7 for package: nss-tools-3.19.1-18.el7.x86_64
    ---> Package nss.x86_64 0:3.28.4-1.2.el7_3 will be an update
    --> Processing Dependency: nss-util >= 3.28.2-1.1 for package: nss-3.28.4-1.2.el7_3.x86_64
    --> Processing Dependency: nss-softokn(x86-64) >= 3.16.2.3-14.2 for package: nss-3.28.4-1.2.el7_3.x86_64
    --> Processing Dependency: nspr >= 4.13.1 for package: nss-3.28.4-1.2.el7_3.x86_64
    --> Processing Dependency: libnssutil3.so(NSSUTIL_3.24)(64bit) for package: nss-3.28.4-1.2.el7_3.x86_64
    --> Processing Dependency: libnssutil3.so(NSSUTIL_3.21)(64bit) for package: nss-3.28.4-1.2.el7_3.x86_64
    ---> Package tzdata-java.noarch 0:2017b-1.el7 will be installed
    --> Running transaction check
    ---> Package libxslt.x86_64 0:1.1.28-5.el7 will be installed
    ---> Package nspr.x86_64 0:4.10.8-2.el7_1 will be updated
    ---> Package nspr.x86_64 0:4.13.1-1.0.el7_3 will be an update
    ---> Package nss-softokn.x86_64 0:3.16.2.3-13.el7_1 will be updated
    ---> Package nss-softokn.x86_64 0:3.16.2.3-14.4.el7 will be an update
    --> Processing Dependency: nss-softokn-freebl(x86-64) >= 3.16.2.3-14.4.el7 for package: nss-softokn-3.16.2.3-14.4.el7.x86_64
    ---> Package nss-sysinit.x86_64 0:3.19.1-18.el7 will be updated
    ---> Package nss-sysinit.x86_64 0:3.28.4-1.2.el7_3 will be an update
    ---> Package nss-tools.x86_64 0:3.19.1-18.el7 will be updated
    ---> Package nss-tools.x86_64 0:3.28.4-1.2.el7_3 will be an update
    ---> Package nss-util.x86_64 0:3.19.1-4.el7_1 will be updated
    ---> Package nss-util.x86_64 0:3.28.4-1.0.el7_3 will be an update
    ---> Package python-javapackages.noarch 0:3.4.1-11.el7 will be installed
    --> Processing Dependency: python-lxml for package: python-javapackages-3.4.1-11.el7.noarch
    --> Running transaction check
    ---> Package nss-softokn-freebl.x86_64 0:3.16.2.3-13.el7_1 will be updated
    ---> Package nss-softokn-freebl.x86_64 0:3.16.2.3-14.4.el7 will be an update
    ---> Package python-lxml.x86_64 0:3.2.1-4.el7 will be installed
    --> Finished Dependency Resolution
    
    Dependencies Resolved
    
    ================================================================================
     Package            Arch   Version                 Repository              Size
    ================================================================================
    Installing:
     puppetserver       noarch 5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7
                                                       pl-puppetserver-latest  64 M
    Installing for dependencies:
     copy-jdk-configs   noarch 1.2-1.el7               localmirror-os          14 k
     java-1.8.0-openjdk-headless
                        x86_64 1:1.8.0.141-1.b16.el7_3 localmirror-updates     31 M
     javapackages-tools noarch 3.4.1-11.el7            localmirror-os          73 k
     libjpeg-turbo      x86_64 1.2.90-5.el7            localmirror-os         134 k
     libxslt            x86_64 1.1.28-5.el7            localmirror-os         242 k
     lksctp-tools       x86_64 1.0.17-2.el7            localmirror-os          88 k
     puppet-agent       x86_64 4.99.0.597.gd33a1fd-1.el7
                                                       pl-puppet-agent-d33a1fddd412fce059fdc68127a0b9b31c0bfe98
                                                                               25 M
     python-javapackages
                        noarch 3.4.1-11.el7            localmirror-os          31 k
     python-lxml        x86_64 3.2.1-4.el7             localmirror-os         758 k
     tzdata-java        noarch 2017b-1.el7             localmirror-updates    183 k
    Updating for dependencies:
     chkconfig          x86_64 1.7.2-1.el7_3.1         localmirror-updates    175 k
     nspr               x86_64 4.13.1-1.0.el7_3        localmirror-updates    126 k
     nss                x86_64 3.28.4-1.2.el7_3        localmirror-updates    872 k
     nss-softokn        x86_64 3.16.2.3-14.4.el7       localmirror-os         306 k
     nss-softokn-freebl x86_64 3.16.2.3-14.4.el7       localmirror-os         204 k
     nss-sysinit        x86_64 3.28.4-1.2.el7_3        localmirror-updates     58 k
     nss-tools          x86_64 3.28.4-1.2.el7_3        localmirror-updates    496 k
     nss-util           x86_64 3.28.4-1.0.el7_3        localmirror-updates     73 k
    
    Transaction Summary
    ================================================================================
    Install  1 Package  (+10 Dependent packages)
    Upgrade             (  8 Dependent packages)
    Total download size: 124 M
    Downloading packages:
    Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
    Public key for puppetserver-5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7.noarch.rpm is not installed
    warning: /var/cache/yum/x86_64/7/pl-puppetserver-latest/packages/puppetserver-5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7.noarch.rpm: Header V4 RSA/SHA1 Signature, key ID 07bb6c57: NOKEY
    --------------------------------------------------------------------------------
    Total                                               23 MB/s | 124 MB  00:05     
    Retrieving key from http://nightlies.puppetlabs.com/07BB6C57
    Importing GPG key 0x07BB6C57:
     Userid     : "Puppet Labs Nightly Build Key (Puppet Labs Nightly Build Key) <delivery@puppetlabs.com>"
     Fingerprint: 8735 f5af 62a9 9a62 8ec1 3377 b8f9 99c0 07bb 6c57
     From       : http://nightlies.puppetlabs.com/07BB6C57
    Running transaction check
    Running transaction test
    Transaction test succeeded
    Running transaction
      Updating   : nspr-4.13.1-1.0.el7_3.x86_64                                1/27     
      Updating   : nss-util-3.28.4-1.0.el7_3.x86_64                            2/27     
      Updating   : nss-softokn-freebl-3.16.2.3-14.4.el7.x86_64                 3/27     
      Updating   : nss-softokn-3.16.2.3-14.4.el7.x86_64                        4/27     
      Installing : libxslt-1.1.28-5.el7.x86_64                                 5/27     
      Updating   : chkconfig-1.7.2-1.el7_3.1.x86_64                            6/27     
      Updating   : nss-3.28.4-1.2.el7_3.x86_64                                 7/27     
      Updating   : nss-sysinit-3.28.4-1.2.el7_3.x86_64                         8/27     
      Installing : python-lxml-3.2.1-4.el7.x86_64                              9/27     
      Installing : python-javapackages-3.4.1-11.el7.noarch                    10/27     
      Installing : javapackages-tools-3.4.1-11.el7.noarch                     11/27     
      Installing : puppet-agent-4.99.0.597.gd33a1fd-1.el7.x86_64              12/27     
      Installing : tzdata-java-2017b-1.el7.noarch                             13/27     
      Installing : copy-jdk-configs-1.2-1.el7.noarch                          14/27     
      Installing : lksctp-tools-1.0.17-2.el7.x86_64                           15/27     
      Installing : libjpeg-turbo-1.2.90-5.el7.x86_64                          16/27     
      Installing : 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_   17/27     
      Installing : puppetserver-5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7.noarc   18/27     
    usermod: no changes
      Updating   : nss-tools-3.28.4-1.2.el7_3.x86_64                          19/27     
      Cleanup    : nss-tools-3.19.1-18.el7.x86_64                             20/27     
      Cleanup    : nss-sysinit-3.19.1-18.el7.x86_64                           21/27     
      Cleanup    : nss-3.19.1-18.el7.x86_64                                   22/27     
      Cleanup    : nss-softokn-3.16.2.3-13.el7_1.x86_64                       23/27     
      Cleanup    : nss-util-3.19.1-4.el7_1.x86_64                             24/27     
      Cleanup    : nspr-4.10.8-2.el7_1.x86_64                                 25/27     
      Cleanup    : nss-softokn-freebl-3.16.2.3-13.el7_1.x86_64                26/27     
      Cleanup    : chkconfig-1.3.61-5.el7.x86_64                              27/27     
      Verifying  : nss-tools-3.28.4-1.2.el7_3.x86_64                           1/27     
      Verifying  : nspr-4.13.1-1.0.el7_3.x86_64                                2/27     
      Verifying  : libjpeg-turbo-1.2.90-5.el7.x86_64                           3/27     
      Verifying  : nss-3.28.4-1.2.el7_3.x86_64                                 4/27     
      Verifying  : python-lxml-3.2.1-4.el7.x86_64                              5/27     
      Verifying  : nss-softokn-3.16.2.3-14.4.el7.x86_64                        6/27     
      Verifying  : puppetserver-5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7.noarc    7/27     
      Verifying  : chkconfig-1.7.2-1.el7_3.1.x86_64                            8/27     
      Verifying  : nss-util-3.28.4-1.0.el7_3.x86_64                            9/27     
      Verifying  : python-javapackages-3.4.1-11.el7.noarch                    10/27     
      Verifying  : lksctp-tools-1.0.17-2.el7.x86_64                           11/27     
      Verifying  : copy-jdk-configs-1.2-1.el7.noarch                          12/27     
      Verifying  : nss-sysinit-3.28.4-1.2.el7_3.x86_64                        13/27     
      Verifying  : libxslt-1.1.28-5.el7.x86_64                                14/27     
      Verifying  : tzdata-java-2017b-1.el7.noarch                             15/27     
      Verifying  : nss-softokn-freebl-3.16.2.3-14.4.el7.x86_64                16/27     
      Verifying  : javapackages-tools-3.4.1-11.el7.noarch                     17/27     
      Verifying  : puppet-agent-4.99.0.597.gd33a1fd-1.el7.x86_64              18/27     
      Verifying  : 1:java-1.8.0-openjdk-headless-1.8.0.141-1.b16.el7_3.x86_   19/27     
      Verifying  : nss-tools-3.19.1-18.el7.x86_64                             20/27     
      Verifying  : nss-softokn-3.16.2.3-13.el7_1.x86_64                       21/27 
      Verifying  : nss-3.19.1-18.el7.x86_64                                   22/27 
      Verifying  : nss-sysinit-3.19.1-18.el7.x86_64                           23/27     
      Verifying  : chkconfig-1.3.61-5.el7.x86_64                              24/27 
      Verifying  : nss-softokn-freebl-3.16.2.3-13.el7_1.x86_64                25/27 
      Verifying  : nspr-4.10.8-2.el7_1.x86_64                                 26/27 
      Verifying  : nss-util-3.19.1-4.el7_1.x86_64                             27/27     
    
    Installed:
      puppetserver.noarch 0:5.0.1-0.1SNAPSHOT.2017.08.06T0835.el7                   
    
    Dependency Installed:
      copy-jdk-configs.noarch 0:1.2-1.el7                                           
      java-1.8.0-openjdk-headless.x86_64 1:1.8.0.141-1.b16.el7_3                    
      javapackages-tools.noarch 0:3.4.1-11.el7                                      
      libjpeg-turbo.x86_64 0:1.2.90-5.el7                                           
      libxslt.x86_64 0:1.1.28-5.el7                                                 
      lksctp-tools.x86_64 0:1.0.17-2.el7                                            
      puppet-agent.x86_64 0:4.99.0.597.gd33a1fd-1.el7                               
      python-javapackages.noarch 0:3.4.1-11.el7                                     
      python-lxml.x86_64 0:3.2.1-4.el7                                              
      tzdata-java.noarch 0:2017b-1.el7                                              
    
    Dependency Updated:
      chkconfig.x86_64 0:1.7.2-1.el7_3.1                                            
      nspr.x86_64 0:4.13.1-1.0.el7_3                                                
      nss.x86_64 0:3.28.4-1.2.el7_3                                                 
      nss-softokn.x86_64 0:3.16.2.3-14.4.el7                                        
      nss-softokn-freebl.x86_64 0:3.16.2.3-14.4.el7                                 
      nss-sysinit.x86_64 0:3.28.4-1.2.el7_3                                         
      nss-tools.x86_64 0:3.28.4-1.2.el7_3                                           
      nss-util.x86_64 0:3.28.4-1.0.el7_3                                            
    
    Complete!
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 28.75 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:55$ puppet --version
  5.0.1

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.00 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:56$ env PATH="/opt/puppetlabs/puppet/bin:${PATH}" ruby --version
  ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:56$ env PATH="/opt/puppetlabs/puppet/bin:${PATH}" ruby -e 'puts Time.now.strftime("%Y-%m-%d %T.%L %z")'
  2017-08-09 02:15:19.703 +0000

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.07 seconds
Host times vary 0 ms

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:56$ env PATH="/opt/puppetlabs/puppet/bin:${PATH}" gem source --clear-all
  *** Removed specs cache ***

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.21 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:56$ env PATH="/opt/puppetlabs/puppet/bin:${PATH}" gem source --add http://rubygems.delivery.puppetlabs.net
  http://rubygems.delivery.puppetlabs.net added to sources

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.60 seconds
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='setup/aio/pre-suite' name='020_InstallCumulusModules.rb' time='0.000536'>
      <skipped type='skip'/>
      <system-out>
        <![CDATA[
No cumulus hosts present
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='setup/aio/pre-suite' name='021_InstallAristaModule.rb' time='0.000465'>
      <skipped type='skip'/>
      <system-out>
        <![CDATA[
No arista hosts present
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='setup/common/pre-suite' name='025_StopFirewall.rb' time='1.523821'>
      <system-out>
        <![CDATA[
Stop firewall
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:56$ puppet resource service firewalld ensure=stopped
    service { 'firewalld':
      ensure => 'stopped',
    }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.52 seconds
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='setup/common/pre-suite' name='040_ValidateSignCert.rb' time='21.497969'>
      <system-out>
        <![CDATA[
Validate Sign Cert

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:58$ facter hostname
  mfellvcjncqc2yd

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.09 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:58$ facter fqdn
  mfellvcjncqc2yd.delivery.puppetlabs.net

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.09 seconds

* Ensure puppet is stopped

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:58$ puppet resource service puppetserver ensure=stopped
  service { 'puppetserver':
    ensure => 'stopped',
  }

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.01 seconds

* Clear SSL on all hosts

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:19:59$ puppet agent --configprint ssldir
  /etc/puppetlabs/puppet/ssl

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.96 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:00$ rm -rf '/etc/puppetlabs/puppet/ssl'

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

* Master: Start Puppet Master
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:00$ mktemp -dt 040_ValidateSignCert.rb.XXXXXX
    /tmp/040_ValidateSignCert.rb.AbzXUU
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  Setting curl retries to 30
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:00$ puppet master --configprint confdir
    /etc/puppetlabs/puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.86 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:01$ puppet master --configprint vardir
    /opt/puppetlabs/server/data/puppetserver
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.72 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:02$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:02$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
    # configuration for the JRuby interpreters
    jruby-puppet: {
        # Where the puppet-agent dependency places puppet, facter, etc...
        # Puppet server expects to load Puppet from this location
        ruby-load-path: [/opt/puppetlabs/puppet/lib/ruby/vendor_ruby]
    
        # This setting determines where JRuby will install gems.  It is used for loading gems,
        # and also by the `puppetserver gem` command line tool.
        gem-home: /opt/puppetlabs/server/data/puppetserver/jruby-gems
    
        # This setting defines the complete "GEM_PATH" for jruby.  If set, it should include
        # the gem-home directory as well as any other directories that gems can be loaded
        # from (including the vendored gems directory for gems that ship with puppetserver)
        gem-path: [${jruby-puppet.gem-home}, "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"]
    
        # PLEASE NOTE: Use caution when modifying the below settings. Modifying
        # these settings will change the value of the corresponding Puppet settings
        # for Puppet Server, but not for the Puppet CLI tools. This likely will not
        # be a problem with master-var-dir, master-run-dir, or master-log-dir unless
        # some critical setting in puppet.conf is interpolating the value of one
        # of the corresponding settings, but it is important that any changes made to
        # master-conf-dir and master-code-dir are also made to the corresponding Puppet
        # settings when running the Puppet CLI tools. See
        # https://docs.puppetlabs.com/puppetserver/latest/puppet_conf_setting_diffs.html#overriding-puppet-settings-in-puppet-server
        # for more information.
    
        # (optional) path to puppet conf dir; if not specified, will use
        # /etc/puppetlabs/puppet
        master-conf-dir: /etc/puppetlabs/puppet
    
        # (optional) path to puppet code dir; if not specified, will use
        # /etc/puppetlabs/code
        master-code-dir: /etc/puppetlabs/code
    
        # (optional) path to puppet var dir; if not specified, will use
        # /opt/puppetlabs/server/data/puppetserver
        master-var-dir: /opt/puppetlabs/server/data/puppetserver
    
        # (optional) path to puppet run dir; if not specified, will use
        # /var/run/puppetlabs/puppetserver
        master-run-dir: /var/run/puppetlabs/puppetserver
    
        # (optional) path to puppet log dir; if not specified, will use
        # /var/log/puppetlabs/puppetserver
        master-log-dir: /var/log/puppetlabs/puppetserver
    
        # (optional) maximum number of JRuby instances to allow
        #max-active-instances: 1
    
        # (optional) Authorize access to Puppet master endpoints via rules
        # specified in the legacy Puppet auth.conf file (if true) or via rules
        # specified in the Puppet Server HOCON-formatted auth.conf (if false or not
        # specified).
        #use-legacy-auth-conf: true
    }
    
    # settings related to HTTPS client requests made by Puppet Server
    http-client: {
        # A list of acceptable protocols for making HTTPS requests
        #ssl-protocols: [TLSv1, TLSv1.1, TLSv1.2]
    
        # A list of acceptable cipher suites for making HTTPS requests
        #cipher-suites: [TLS_RSA_WITH_AES_256_CBC_SHA256,
        #                TLS_RSA_WITH_AES_256_CBC_SHA,
        #                TLS_RSA_WITH_AES_128_CBC_SHA256,
        #                TLS_RSA_WITH_AES_128_CBC_SHA]
    
        # Whether to enable http-client metrics; defaults to 'true'.
        #metrics-enabled: true
    }
    
    # settings related to profiling the puppet Ruby code
    profiler: {
        # enable or disable profiling for the Ruby code; defaults to 'true'.
        #enabled: true
    }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
  localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1oz52ar centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:02$ puppet master --configprint confdir
    /etc/puppetlabs/puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:03$ test -e /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:03$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/040_ValidateSignCert.rb.AbzXUU/puppet.conf.bak
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:03$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.77 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:04$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.01 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:05$ cat /etc/puppetlabs/puppet/puppet.conf
    # This file can be used to override the default puppet settings.
    # See the following links for more details on what settings are available:
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
    [master]
    vardir = /opt/puppetlabs/server/data/puppetserver
    logdir = /var/log/puppetlabs/puppetserver
    rundir = /var/run/puppetlabs/puppetserver
    pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
    codedir = /etc/puppetlabs/code
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-ek6yvt centos7-64-1:/tmp/040_ValidateSignCert.rb.AbzXUU/puppet.conf {:ignore => }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:05$ cat /etc/puppetlabs/puppet/puppet.conf
    [master]
    vardir = /opt/puppetlabs/server/data/puppetserver
    logdir = /var/log/puppetlabs/puppetserver
    rundir = /var/run/puppetlabs/puppetserver
    pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
    codedir = /etc/puppetlabs/code
    
    [main]
    dns_alt_names = puppet,mfellvcjncqc2yd,mfellvcjncqc2yd.delivery.puppetlabs.net
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:05$ puppet master
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 8.38 seconds
  Waiting for the puppet master to start
  The puppet master has started
  
  * Master: sign all certs
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:13$ puppet cert --sign --all
    Error: No waiting certificate requests to sign
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.52 seconds
  Exited: 24
  
  * Agents: Run agent --test second time to obtain signed cert
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:15$ puppet agent --test --server mfellvcjncqc2yd.delivery.puppetlabs.net
    Info: Using configured environment 'production'
    Info: Retrieving pluginfacts
    Info: Retrieving plugin
    Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
    Info: Applying configuration version '1502244941'
    Notice: Applied catalog in 0.01 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.63 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:18$ cat `puppet master --configprint pidfile`
    2775  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.93 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:18$ kill 2775
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:18$ kill -0 2775
    bash: line 0: kill: (2775) - No such process
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  Exited: 1
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:19$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.95 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:19$ if [ -f '/tmp/040_ValidateSignCert.rb.AbzXUU/puppet.conf.bak' ]; then cat '/tmp/040_ValidateSignCert.rb.AbzXUU/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/040_ValidateSignCert.rb.AbzXUU/puppet.conf.bak'; fi
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='setup/aio/pre-suite' name='045_EnsureMasterStarted.rb' time='35.950029'>
      <system-out>
        <![CDATA[
mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:20$ puppet resource service puppetserver ensure=running
  Notice: /Service[puppetserver]/ensure: ensure changed 'stopped' to 'running'
  service { 'puppetserver':
    ensure => 'running',
  }

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 35.95 seconds
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
  </testsuite>
  <meta_test_info page_active='no-links' link_url=''/>
  <testsuite name='tests' tests='7' errors='0' failures='0' skipped='0' pending='0' total='7' time='176.915806'>
    <properties>
      <property name='project' value='Beaker'/>
      <property name='department' value='unknown'/>
      <property name='created_by' value='rishi.javia'/>
      <property name='host_tags' value='{}'/>
      <property name='openstack_api_key' value=''/>
      <property name='openstack_username' value=''/>
      <property name='openstack_auth_url' value='/tokens'/>
      <property name='openstack_tenant' value=''/>
      <property name='openstack_keyname' value=''/>
      <property name='openstack_network' value=''/>
      <property name='openstack_region' value=''/>
      <property name='openstack_volume_support' value='true'/>
      <property name='jenkins_build_url' value=''/>
      <property name='validate' value='true'/>
      <property name='configure' value='true'/>
      <property name='log_level' value='debug'/>
      <property name='trace_limit' value='10'/>
      <property name='master-start-curl-retries' value='30'/>
      <property name='masterless' value='false'/>
      <property name='options_file' value='merged_options.rb'/>
      <property name='type' value='aio'/>
      <property name='provision' value='true'/>
      <property name='preserve_hosts' value='onfail'/>
      <property name='root_keys' value='false'/>
      <property name='quiet' value='false'/>
      <property name='project_root' value='/Users/rishi.javia/Documents/beaker/lib/beaker'/>
      <property name='xml_dir' value='junit'/>
      <property name='xml_file' value='beaker_junit.xml'/>
      <property name='xml_time' value='beaker_times.xml'/>
      <property name='xml_time_enabled' value='false'/>
      <property name='xml_stylesheet' value='junit.xsl'/>
      <property name='default_log_prefix' value='beaker_logs'/>
      <property name='log_dir' value='log'/>
      <property name='log_sut_event' value='sut.log'/>
      <property name='color' value='true'/>
      <property name='dry_run' value='false'/>
      <property name='test_tag_and' value='[]'/>
      <property name='test_tag_or' value='[]'/>
      <property name='test_tag_exclude' value='[]'/>
      <property name='timeout' value='900'/>
      <property name='fail_mode' value='slow'/>
      <property name='accept_all_exit_codes' value='false'/>
      <property name='timesync' value='false'/>
      <property name='disable_iptables' value='false'/>
      <property name='set_env' value='true'/>
      <property name='disable_updates' value='true'/>
      <property name='repo_proxy' value='true'/>
      <property name='package_proxy' value='false'/>
      <property name='add_el_extras' value='false'/>
      <property name='epel_url' value='http://dl.fedoraproject.org/pub/epel'/>
      <property name='epel_url_archive' value='http://archive.fedoraproject.org/pub/archive/epel'/>
      <property name='consoleport' value='443'/>
      <property name='pe_dir' value='/opt/enterprise/dists'/>
      <property name='pe_version_file' value='LATEST'/>
      <property name='pe_version_file_win' value='LATEST-win'/>
      <property name='host_env' value='{}'/>
      <property name='host_name_prefix' value=''/>
      <property name='ssh_env_file' value='~/.ssh/environment'/>
      <property name='profile_d_env_file' value='/etc/profile.d/beaker_env.sh'/>
      <property name='dot_fog' value='/Users/rishi.javia/.fog'/>
      <property name='ec2_yaml' value='config/image_templates/ec2.yaml'/>
      <property name='help' value='false'/>
      <property name='collect_perf_data' value='none'/>
      <property name='puppetdb_port_ssl' value='8081'/>
      <property name='puppetdb_port_nonssl' value='8080'/>
      <property name='puppetserver_port' value='8140'/>
      <property name='nodeclassifier_port' value='4433'/>
      <property name='cache_files_locally' value='false'/>
      <property name='aws_keyname_modifier' value='7069933815'/>
      <property name='run_in_parallel' value='[]'/>
      <property name='ssh' value='{:config=&gt;false, :paranoid=&gt;false, :auth_methods=&gt;[&quot;publickey&quot;], :port=&gt;22, :forward_agent=&gt;true, :keys=&gt;[&quot;id_rsa_acceptance&quot;, &quot;/Users/rishi.javia/.ssh/id_rsa-acceptance&quot;], :user_known_hosts_file=&gt;&quot;/Users/rishi.javia/.ssh/known_hosts&quot;, :keepalive=&gt;true}'/>
      <property name='tests' value='[&quot;tests/reports/cached_catalog_status_in_report.rb&quot;, &quot;tests/reports/corrective_change_new_resource.rb&quot;, &quot;tests/reports/corrective_change_outside_puppet.rb&quot;, &quot;tests/reports/corrective_change_via_puppet.rb&quot;, &quot;tests/reports/failover_master.rb&quot;, &quot;tests/reports/finalized_on_cycle.rb&quot;, &quot;tests/reports/submission.rb&quot;]'/>
      <property name='pre_suite' value='[&quot;setup/common/pre-suite/000-delete-puppet-when-none.rb&quot;, &quot;setup/aio/pre-suite/010_Install.rb&quot;, &quot;setup/aio/pre-suite/020_InstallCumulusModules.rb&quot;, &quot;setup/aio/pre-suite/021_InstallAristaModule.rb&quot;, &quot;setup/common/pre-suite/025_StopFirewall.rb&quot;, &quot;setup/common/pre-suite/040_ValidateSignCert.rb&quot;, &quot;setup/aio/pre-suite/045_EnsureMasterStarted.rb&quot;]'/>
      <property name='is_puppetserver' value='true'/>
      <property name='use-service' value='true'/>
      <property name='puppetservice' value='puppetserver'/>
      <property name='puppetserver-confdir' value='/etc/puppetlabs/puppetserver/conf.d'/>
      <property name='puppetserver-config' value='/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf'/>
      <property name='load_path' value='[&quot;./lib&quot;]'/>
      <property name='xml' value='true'/>
      <property name='forge_host' value='forge-aio01-petest.puppetlabs.com'/>
      <property name='hosts_file' value='/Users/rishi.javia/Documents/puppet/acceptance/centos7-pe.yml'/>
      <property name='command_line' value='/Users/rishi.javia/Documents/puppet/acceptance/vendor/bundle/ruby/2.2.0/bin/beaker --options-file merged_options.rb --hosts centos7-pe.yml --tests=tests/reports'/>
      <property name='HOSTS' value='{:&quot;centos7-64-1&quot;=&gt;{:pe_dir=&gt;nil, :pe_ver=&gt;nil, :pe_upgrade_dir=&gt;nil, :pe_upgrade_ver=&gt;nil, :hypervisor=&gt;&quot;vmpooler&quot;, :platform=&gt;&quot;el-7-x86_64&quot;, :template=&gt;&quot;centos-7-x86_64&quot;, :roles=&gt;[&quot;master&quot;, &quot;agent&quot;, &quot;dashboard&quot;, &quot;database&quot;, &quot;default&quot;], :host_tags=&gt;{}}}'/>
      <property name='nfs_server' value='none'/>
      <property name='pooling_api' value='http://vmpooler.delivery.puppetlabs.net/'/>
      <property name='home' value='/Users/rishi.javia'/>
      <property name='helper' value='[]'/>
      <property name='post_suite' value='[]'/>
      <property name='install' value='[]'/>
      <property name='pre_cleanup' value='[]'/>
      <property name='modules' value='[]'/>
      <property name='logger' value='#&lt;Beaker::Logger:0x007ff359404f58&gt;'/>
      <property name='timestamp' value='2017-08-08 19:19:20 -0700'/>
      <property name='beaker_version' value='3.21.1'/>
      <property name='log_prefix' value='centos7-pe'/>
      <property name='xml_dated_dir' value='junit/centos7-pe/2017-08-08_19_19_20'/>
      <property name='log_dated_dir' value='log/centos7-pe/2017-08-08_19_19_20'/>
      <property name='logger_sut' value='#&lt;Beaker::Logger:0x007ff359404d28&gt;'/>
    </properties>
    <testcase classname='tests/reports' name='cached_catalog_status_in_report.rb' time='30.680489'>
      <system-out>
        <![CDATA[
PUP-5867: The report specifies whether a cached catalog was used, and if so, why
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:56$ puppet master --configprint user
    puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.74 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:56$ getent passwd puppet
    puppet:x:996:994:puppetserver daemon:/opt/puppetlabs/server/data/puppetserver:/sbin/nologin
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:56$ mktemp -dt report_dir.XXXXXX
    /tmp/report_dir.jL8tDn
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:56$ chown puppet:puppet /tmp/report_dir.jL8tDn
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:56$ mktemp -dt cached_catalog_status_in_report.rb.XXXXXX
    /tmp/cached_catalog_status_in_report.rb.Qhpl80
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  Setting curl retries to 30
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:56$ puppet master --configprint confdir
    /etc/puppetlabs/puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.76 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:57$ puppet master --configprint vardir
    /opt/puppetlabs/server/data/puppetserver
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.77 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:58$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:58$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
    {
      "jruby-puppet": {
        "ruby-load-path": [
          "/opt/puppetlabs/puppet/lib/ruby/vendor_ruby"
        ],
        "gem-home": "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
        "gem-path": [
          "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
          "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"
        ],
        "master-conf-dir": "/etc/puppetlabs/puppet",
        "master-code-dir": "/etc/puppetlabs/code",
        "master-var-dir": "/opt/puppetlabs/server/data/puppetserver",
        "master-run-dir": "/var/run/puppetlabs/puppetserver",
        "master-log-dir": "/var/log/puppetlabs/puppetserver"
      },
      "http-client": {
      },
      "profiler": {
      }
    }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-szb9pd centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:58$ puppet master --configprint confdir
    /etc/puppetlabs/puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.05 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:59$ test -e /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:59$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/cached_catalog_status_in_report.rb.Qhpl80/puppet.conf.bak
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:20:59$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.76 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:00$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.75 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:01$ cat /etc/puppetlabs/puppet/puppet.conf
    # This file can be used to override the default puppet settings.
    # See the following links for more details on what settings are available:
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
    [master]
    vardir = /opt/puppetlabs/server/data/puppetserver
    logdir = /var/log/puppetlabs/puppetserver
    rundir = /var/run/puppetlabs/puppetserver
    pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
    codedir = /etc/puppetlabs/code
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1yk8aes centos7-64-1:/tmp/cached_catalog_status_in_report.rb.Qhpl80/puppet.conf {:ignore => }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:01$ cat /etc/puppetlabs/puppet/puppet.conf
    [master]
    vardir = /opt/puppetlabs/server/data/puppetserver
    logdir = /var/log/puppetlabs/puppetserver
    rundir = /var/run/puppetlabs/puppetserver
    pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
    codedir = /etc/puppetlabs/code
    
    [master]
    reportdir = /tmp/report_dir.jL8tDn
    reports = store
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:01$ service puppetserver reload
    Redirecting to /bin/systemctl reload  puppetserver.service
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 5.57 seconds
  
  * cached_catalog_status should be 'not used' when a new catalog is retrieved
    
    * Initial run: cache a newly retrieved catalog
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:07$ puppet agent -t --server mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Using configured environment 'production'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502244993'
        Notice: Applied catalog in 0.01 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.91 seconds
    
    * Run again and ensure report indicates that the cached catalog was not used
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:09$ puppet agent --onetime --no-daemonize --server mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.32 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:12$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:13$ cat /tmp/report_dir.jL8tDn/mfellvcjncqc2yd.delivery.puppetlabs.net/*
        --- !ruby/object:Puppet::Transaction::Report
        host: mfellvcjncqc2yd.delivery.puppetlabs.net
        time: '2017-08-09T02:16:34.799132438Z'
        configuration_version: 1502244995
        transaction_uuid: bb0e98b0-0f38-4051-b951-aa2cce742fb9
        report_format: 7
        puppet_version: 5.0.1
        status: unchanged
        noop: false
        noop_pending: false
        environment: production
        logs:
        - level: notice
          message: Applied catalog in 0.02 seconds
          source: Puppet
          tags:
          - notice
          time: '2017-08-09T02:16:35.488999264Z'
          file:
          line:
        metrics:
          resources:
            name: resources
            label: Resources
            values:
            - - total
              - Total
              - 7
            - - skipped
              - Skipped
              - 0
            - - failed
              - Failed
              - 0
            - - failed_to_restart
              - Failed to restart
              - 0
            - - restarted
              - Restarted
              - 0
            - - changed
              - Changed
              - 0
            - - out_of_sync
              - Out of sync
              - 0
            - - scheduled
              - Scheduled
              - 0
            - - corrective_change
              - Corrective change
              - 0
          time:
            name: time
            label: Time
            values:
            - - schedule
              - Schedule
              - 0.00128984
            - - filebucket
              - Filebucket
              - 5.8244e-05
            - - config_retrieval
              - Config retrieval
              - 0.19774550499994348
            - - total
              - Total
              - 0.19909358899994348
          changes:
            name: changes
            label: Changes
            values:
            - - total
              - Total
              - 0
          events:
            name: events
            label: Events
            values:
            - - total
              - Total
              - 0
            - - failure
              - Failure
              - 0
            - - success
              - Success
              - 0
        resource_statuses:
          Schedule[puppet]:
            title: puppet
            file:
            line:
            resource: Schedule[puppet]
            resource_type: Schedule
            containment_path:
            - Schedule[puppet]
            evaluation_time: 6.396e-05
            tags:
            - schedule
            - puppet
            time: '2017-08-09T02:16:35.477615213Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[hourly]:
            title: hourly
            file:
            line:
            resource: Schedule[hourly]
            resource_type: Schedule
            containment_path:
            - Schedule[hourly]
            evaluation_time: 0.000557027
            tags:
            - schedule
            - hourly
            time: '2017-08-09T02:16:35.477769180Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[daily]:
            title: daily
            file:
            line:
            resource: Schedule[daily]
            resource_type: Schedule
            containment_path:
            - Schedule[daily]
            evaluation_time: 4.865e-05
            tags:
            - schedule
            - daily
            time: '2017-08-09T02:16:35.478418737Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[weekly]:
            title: weekly
            file:
            line:
            resource: Schedule[weekly]
            resource_type: Schedule
            containment_path:
            - Schedule[weekly]
            evaluation_time: 6.7614e-05
            tags:
            - schedule
            - weekly
            time: '2017-08-09T02:16:35.478568215Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[monthly]:
            title: monthly
            file:
            line:
            resource: Schedule[monthly]
            resource_type: Schedule
            containment_path:
            - Schedule[monthly]
            evaluation_time: 0.00050407
            tags:
            - schedule
            - monthly
            time: '2017-08-09T02:16:35.478725892Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[never]:
            title: never
            file:
            line:
            resource: Schedule[never]
            resource_type: Schedule
            containment_path:
            - Schedule[never]
            evaluation_time: 4.8519e-05
            tags:
            - schedule
            - never
            time: '2017-08-09T02:16:35.479320053Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Filebucket[puppet]:
            title: puppet
            file:
            line:
            resource: Filebucket[puppet]
            resource_type: Filebucket
            containment_path:
            - Filebucket[puppet]
            evaluation_time: 5.8244e-05
            tags:
            - filebucket
            - puppet
            time: '2017-08-09T02:16:35.479466425Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
        corrective_change: false
        catalog_uuid: 129da284-e12f-4524-b6fe-3f0467f3a118
        cached_catalog_status: not_used
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.05 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:13$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.18 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:14$ rm -rf /tmp/report_dir.jL8tDn/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  * Run with --use_cached_catalog and ensure report indicates cached catalog was explicitly requested
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:14$ puppet agent --onetime --no-daemonize --use_cached_catalog --server mfellvcjncqc2yd.delivery.puppetlabs.net
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.12 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:16$ puppet agent --configprint node_name_value
      mfellvcjncqc2yd.delivery.puppetlabs.net
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.79 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:17$ cat /tmp/report_dir.jL8tDn/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      --- !ruby/object:Puppet::Transaction::Report
      host: mfellvcjncqc2yd.delivery.puppetlabs.net
      time: '2017-08-09T02:16:39.420142957Z'
      configuration_version: 1502244995
      transaction_uuid: a89391bb-ee54-4c1a-aae1-f49a876a26c3
      report_format: 7
      puppet_version: 5.0.1
      status: unchanged
      noop: false
      noop_pending: false
      environment: production
      logs:
      - level: notice
        message: Applied catalog in 0.02 seconds
        source: Puppet
        tags:
        - notice
        time: '2017-08-09T02:16:39.596022280Z'
        file:
        line:
      metrics:
        resources:
          name: resources
          label: Resources
          values:
          - - total
            - Total
            - 7
          - - skipped
            - Skipped
            - 0
          - - failed
            - Failed
            - 0
          - - failed_to_restart
            - Failed to restart
            - 0
          - - restarted
            - Restarted
            - 0
          - - changed
            - Changed
            - 0
          - - out_of_sync
            - Out of sync
            - 0
          - - scheduled
            - Scheduled
            - 0
          - - corrective_change
            - Corrective change
            - 0
        time:
          name: time
          label: Time
          values:
          - - schedule
            - Schedule
            - 0.00032566800000000004
          - - filebucket
            - Filebucket
            - 7.5479e-05
          - - config_retrieval
            - Config retrieval
            - 0.012050831000010476
          - - total
            - Total
            - 0.012451978000010475
        changes:
          name: changes
          label: Changes
          values:
          - - total
            - Total
            - 0
        events:
          name: events
          label: Events
          values:
          - - total
            - Total
            - 0
          - - failure
            - Failure
            - 0
          - - success
            - Success
            - 0
      resource_statuses:
        Schedule[puppet]:
          title: puppet
          file:
          line:
          resource: Schedule[puppet]
          resource_type: Schedule
          containment_path:
          - Schedule[puppet]
          evaluation_time: 8.8096e-05
          tags:
          - schedule
          - puppet
          time: '2017-08-09T02:16:39.583657342Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[hourly]:
          title: hourly
          file:
          line:
          resource: Schedule[hourly]
          resource_type: Schedule
          containment_path:
          - Schedule[hourly]
          evaluation_time: 4.6109e-05
          tags:
          - schedule
          - hourly
          time: '2017-08-09T02:16:39.583831906Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[daily]:
          title: daily
          file:
          line:
          resource: Schedule[daily]
          resource_type: Schedule
          containment_path:
          - Schedule[daily]
          evaluation_time: 4.7095e-05
          tags:
          - schedule
          - daily
          time: '2017-08-09T02:16:39.583975524Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[weekly]:
          title: weekly
          file:
          line:
          resource: Schedule[weekly]
          resource_type: Schedule
          containment_path:
          - Schedule[weekly]
          evaluation_time: 4.548e-05
          tags:
          - schedule
          - weekly
          time: '2017-08-09T02:16:39.584105620Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[monthly]:
          title: monthly
          file:
          line:
          resource: Schedule[monthly]
          resource_type: Schedule
          containment_path:
          - Schedule[monthly]
          evaluation_time: 4.4675e-05
          tags:
          - schedule
          - monthly
          time: '2017-08-09T02:16:39.584256348Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[never]:
          title: never
          file:
          line:
          resource: Schedule[never]
          resource_type: Schedule
          containment_path:
          - Schedule[never]
          evaluation_time: 5.4213e-05
          tags:
          - schedule
          - never
          time: '2017-08-09T02:16:39.584381508Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Filebucket[puppet]:
          title: puppet
          file:
          line:
          resource: Filebucket[puppet]
          resource_type: Filebucket
          containment_path:
          - Filebucket[puppet]
          evaluation_time: 7.5479e-05
          tags:
          - filebucket
          - puppet
          time: '2017-08-09T02:16:39.584535280Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
      corrective_change: false
      catalog_uuid: 129da284-e12f-4524-b6fe-3f0467f3a118
      cached_catalog_status: explicitly_requested
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.05 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:17$ puppet agent --configprint node_name_value
      mfellvcjncqc2yd.delivery.puppetlabs.net
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.01 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:18$ rm -rf /tmp/report_dir.jL8tDn/mfellvcjncqc2yd.delivery.puppetlabs.net/*
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  * On a run which fails to retrieve a new catalog, ensure report indicates cached catalog was used on failure
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:18$ puppet agent --onetime --no-daemonize --report_server mfellvcjncqc2yd.delivery.puppetlabs.net --server nonexist
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.12 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:20$ puppet agent --configprint node_name_value
      mfellvcjncqc2yd.delivery.puppetlabs.net
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:21$ cat /tmp/report_dir.jL8tDn/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      --- !ruby/object:Puppet::Transaction::Report
      host: mfellvcjncqc2yd.delivery.puppetlabs.net
      time: '2017-08-09T02:16:43.436993620Z'
      configuration_version: 1502244995
      transaction_uuid: 1c2e98a8-ca53-4b37-b87a-e30740c8e051
      report_format: 7
      puppet_version: 5.0.1
      status: unchanged
      noop: false
      noop_pending: false
      environment: production
      logs:
      - level: warning
        message: 'Unable to fetch my node definition, but the agent run will continue:'
        source: Puppet
        tags:
        - warning
        time: '2017-08-09T02:16:43.476474987Z'
        file:
        line:
      - level: warning
        message: 'Failed to open TCP connection to nonexist:8140 (getaddrinfo: Name or service
          not known)'
        source: Puppet
        tags:
        - warning
        time: '2017-08-09T02:16:43.476589509Z'
        file:
        line:
      - level: err
        message: 'Failed to generate additional resources using ''eval_generate'': Failed
          to open TCP connection to nonexist:8140 (getaddrinfo: Name or service not known)'
        source: "/File[/opt/puppetlabs/puppet/cache/facts.d]"
        tags:
        - err
        - file
        - pluginfacts
        time: '2017-08-09T02:16:43.516691691Z'
        file:
        line:
      - level: err
        message: 'Could not evaluate: Could not retrieve file metadata for puppet:///pluginfacts:
          Failed to open TCP connection to nonexist:8140 (getaddrinfo: Name or service not
          known)'
        source: "/File[/opt/puppetlabs/puppet/cache/facts.d]"
        tags:
        - err
        - file
        - pluginfacts
        time: '2017-08-09T02:16:43.529504502Z'
        file:
        line:
      - level: err
        message: 'Failed to generate additional resources using ''eval_generate'': Failed
          to open TCP connection to nonexist:8140 (getaddrinfo: Name or service not known)'
        source: "/File[/opt/puppetlabs/puppet/cache/lib]"
        tags:
        - err
        - file
        - plugin
        time: '2017-08-09T02:16:43.540325407Z'
        file:
        line:
      - level: err
        message: 'Could not evaluate: Could not retrieve file metadata for puppet:///plugins:
          Failed to open TCP connection to nonexist:8140 (getaddrinfo: Name or service not
          known)'
        source: "/File[/opt/puppetlabs/puppet/cache/lib]"
        tags:
        - err
        - file
        - plugin
        time: '2017-08-09T02:16:43.549287036Z'
        file:
        line:
      - level: err
        message: 'Could not retrieve catalog from remote server: Failed to open TCP connection
          to nonexist:8140 (getaddrinfo: Name or service not known)'
        source: Puppet
        tags:
        - err
        time: '2017-08-09T02:16:43.716330003Z'
        file:
        line:
      - level: notice
        message: Applied catalog in 0.02 seconds
        source: Puppet
        tags:
        - notice
        time: '2017-08-09T02:16:43.765374205Z'
        file:
        line:
      metrics:
        resources:
          name: resources
          label: Resources
          values:
          - - total
            - Total
            - 7
          - - skipped
            - Skipped
            - 0
          - - failed
            - Failed
            - 0
          - - failed_to_restart
            - Failed to restart
            - 0
          - - restarted
            - Restarted
            - 0
          - - changed
            - Changed
            - 0
          - - out_of_sync
            - Out of sync
            - 0
          - - scheduled
            - Scheduled
            - 0
          - - corrective_change
            - Corrective change
            - 0
        time:
          name: time
          label: Time
          values:
          - - schedule
            - Schedule
            - 0.000326841
          - - filebucket
            - Filebucket
            - 5.6877e-05
          - - config_retrieval
            - Config retrieval
            - 0.0012088089999906515
          - - total
            - Total
            - 0.0015925269999906514
        changes:
          name: changes
          label: Changes
          values:
          - - total
            - Total
            - 0
        events:
          name: events
          label: Events
          values:
          - - total
            - Total
            - 0
          - - failure
            - Failure
            - 0
          - - success
            - Success
            - 0
      resource_statuses:
        Schedule[puppet]:
          title: puppet
          file:
          line:
          resource: Schedule[puppet]
          resource_type: Schedule
          containment_path:
          - Schedule[puppet]
          evaluation_time: 5.9625e-05
          tags:
          - schedule
          - puppet
          time: '2017-08-09T02:16:43.754131451Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[hourly]:
          title: hourly
          file:
          line:
          resource: Schedule[hourly]
          resource_type: Schedule
          containment_path:
          - Schedule[hourly]
          evaluation_time: 4.6716e-05
          tags:
          - schedule
          - hourly
          time: '2017-08-09T02:16:43.754276973Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[daily]:
          title: daily
          file:
          line:
          resource: Schedule[daily]
          resource_type: Schedule
          containment_path:
          - Schedule[daily]
          evaluation_time: 8.145e-05
          tags:
          - schedule
          - daily
          time: '2017-08-09T02:16:43.754409964Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[weekly]:
          title: weekly
          file:
          line:
          resource: Schedule[weekly]
          resource_type: Schedule
          containment_path:
          - Schedule[weekly]
          evaluation_time: 4.5611e-05
          tags:
          - schedule
          - weekly
          time: '2017-08-09T02:16:43.754596401Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[monthly]:
          title: monthly
          file:
          line:
          resource: Schedule[monthly]
          resource_type: Schedule
          containment_path:
          - Schedule[monthly]
          evaluation_time: 4.5681e-05
          tags:
          - schedule
          - monthly
          time: '2017-08-09T02:16:43.754726177Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[never]:
          title: never
          file:
          line:
          resource: Schedule[never]
          resource_type: Schedule
          containment_path:
          - Schedule[never]
          evaluation_time: 4.7758e-05
          tags:
          - schedule
          - never
          time: '2017-08-09T02:16:43.754887805Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Filebucket[puppet]:
          title: puppet
          file:
          line:
          resource: Filebucket[puppet]
          resource_type: Filebucket
          containment_path:
          - Filebucket[puppet]
          evaluation_time: 5.6877e-05
          tags:
          - filebucket
          - puppet
          time: '2017-08-09T02:16:43.755029247Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
      corrective_change: false
      catalog_uuid: 129da284-e12f-4524-b6fe-3f0467f3a118
      cached_catalog_status: on_failure
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.06 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:21$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.87 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:22$ if [ -f '/tmp/cached_catalog_status_in_report.rb.Qhpl80/puppet.conf.bak' ]; then cat '/tmp/cached_catalog_status_in_report.rb.Qhpl80/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/cached_catalog_status_in_report.rb.Qhpl80/puppet.conf.bak'; fi
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:22$ service puppetserver reload
    Redirecting to /bin/systemctl reload  puppetserver.service
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 4.26 seconds
Begin teardown

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:26$ rm -rf /tmp/report_dir.jL8tDn

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='tests/reports' name='corrective_change_new_resource.rb' time='19.730598'>
      <system-out>
        <![CDATA[
C98092 - a new resource should not be reported as a corrective change
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:26$ mkdir -p /tmp/corrective_change_new_resource_qgdeph5a/manifests /tmp/corrective_change_new_resource_qgdeph5a/modules; chmod -R 755 /tmp/corrective_change_new_resource_qgdeph5a
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:26$ puppet agent --configprint environmentpath
    /etc/puppetlabs/code/environments
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.85 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:27$ mkdir -p /etc/puppetlabs/code/environments; ln -sf /tmp/corrective_change_new_resource_qgdeph5a /etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:27$ mktemp -t corrective_change_new_resource_qgdeph5a.XXXXXX
    /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  * create file resource - site.pp to verify corrective change flag
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:27$ mktemp -t apply_manifest.pp.XXXXXX
      /tmp/apply_manifest.pp.TvNNnn
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1u76oq1 centos7-64-1:/tmp/apply_manifest.pp.TvNNnn {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:27$ puppet apply --verbose --detailed-exitcodes /tmp/apply_manifest.pp.TvNNnn
      Notice: Compiled catalog for mfellvcjncqc2yd.delivery.puppetlabs.net in environment production in 0.02 seconds
      Info: Applying configuration version '1502245012'
      Notice: /Stage[main]/Main/File[/etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a/manifests/site.pp]/ensure: defined content as '{md5}004fb3d14308b167361f069f5b121cf5'
      Notice: Applied catalog in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.64 seconds
    Exited: 2
  
  * run agent(s)
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:29$ mktemp -dt corrective_change_new_resource.rb.XXXXXX
      /tmp/corrective_change_new_resource.rb.IyTUJy
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    Setting curl retries to 30
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:29$ puppet master --configprint confdir
      /etc/puppetlabs/puppet
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.88 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:30$ puppet master --configprint vardir
      /opt/puppetlabs/server/data/puppetserver
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:31$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:31$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
      {
        "jruby-puppet": {
          "ruby-load-path": [
            "/opt/puppetlabs/puppet/lib/ruby/vendor_ruby"
          ],
          "gem-home": "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
          "gem-path": [
            "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
            "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"
          ],
          "master-conf-dir": "/etc/puppetlabs/puppet",
          "master-code-dir": "/etc/puppetlabs/code",
          "master-var-dir": "/opt/puppetlabs/server/data/puppetserver",
          "master-run-dir": "/var/run/puppetlabs/puppetserver",
          "master-log-dir": "/var/log/puppetlabs/puppetserver"
        },
        "http-client": {
        },
        "profiler": {
        }
      }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1k1hr8 centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:31$ puppet master --configprint confdir
      /etc/puppetlabs/puppet
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.77 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:32$ test -e /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:32$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/corrective_change_new_resource.rb.IyTUJy/puppet.conf.bak
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:32$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.87 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:33$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.87 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:34$ cat /etc/puppetlabs/puppet/puppet.conf
      # This file can be used to override the default puppet settings.
      # See the following links for more details on what settings are available:
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
      [master]
      vardir = /opt/puppetlabs/server/data/puppetserver
      logdir = /var/log/puppetlabs/puppetserver
      rundir = /var/run/puppetlabs/puppetserver
      pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
      codedir = /etc/puppetlabs/code
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1psxqvo centos7-64-1:/tmp/corrective_change_new_resource.rb.IyTUJy/puppet.conf {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:34$ cat /etc/puppetlabs/puppet/puppet.conf
      [master]
      vardir = /opt/puppetlabs/server/data/puppetserver
      logdir = /var/log/puppetlabs/puppetserver
      rundir = /var/run/puppetlabs/puppetserver
      pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
      codedir = /etc/puppetlabs/code
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:34$ service puppetserver reload
      Redirecting to /bin/systemctl reload  puppetserver.service
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 4.40 seconds
    
    * Run agent once to create new File resource
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:38$ puppet agent -t --environment corrective_change_new_resource_qgdeph5a --server mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Using configured environment 'corrective_change_new_resource_qgdeph5a'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245024'
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]/content: 
        --- /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw	2017-08-09 02:16:51.198986500 +0000
        +++ /tmp/puppet-file20170809-3898-1buty4i	2017-08-09 02:17:04.522986818 +0000
        @@ -0,0 +1 @@
        +this is a test
        
        Info: Computing checksum on file /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw
        Info: /Stage[main]/Main/File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]: Filebucketed /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw to puppet with sum d41d8cd98f00b204e9800998ecf8427e
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]/content: content changed '{md5}d41d8cd98f00b204e9800998ecf8427e' to '{md5}e19c1283c925b3206685ff522acfe3e6'
        Notice: Applied catalog in 0.07 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.51 seconds
      Exited: 2
    
    * Verify the file resource is created
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:41$ cat /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw
        this is a test
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:41$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.84 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:42$ if [ -f '/tmp/corrective_change_new_resource.rb.IyTUJy/puppet.conf.bak' ]; then cat '/tmp/corrective_change_new_resource.rb.IyTUJy/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/corrective_change_new_resource.rb.IyTUJy/puppet.conf.bak'; fi
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:42$ service puppetserver reload
      Redirecting to /bin/systemctl reload  puppetserver.service
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 3.23 seconds
  
  * Check report
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:45$ puppet config print statedir
      /opt/puppetlabs/puppet/cache/state
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.99 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ cat /opt/puppetlabs/puppet/cache/state/last_run_report.yaml
      --- !ruby/object:Puppet::Transaction::Report
      host: mfellvcjncqc2yd.delivery.puppetlabs.net
      time: '2017-08-09T02:17:03.578677350+00:00'
      configuration_version: 1502245024
      transaction_uuid: b49a95d9-88b5-4969-be49-3d219121d5a7
      report_format: 7
      puppet_version: 5.0.1
      status: changed
      noop: false
      noop_pending: false
      environment: corrective_change_new_resource_qgdeph5a
      logs:
      - level: info
        message: Using configured environment 'corrective_change_new_resource_qgdeph5a'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:03.968667078+00:00'
        file: 
        line: 
      - level: info
        message: Retrieving pluginfacts
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:03.968991940+00:00'
        file: 
        line: 
      - level: info
        message: Retrieving plugin
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:04.040740064+00:00'
        file: 
        line: 
      - level: info
        message: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:04.461934902+00:00'
        file: 
        line: 
      - level: info
        message: Applying configuration version '1502245024'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:04.520051229+00:00'
        file: 
        line: 
      - level: notice
        message: "\n--- /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw\t2017-08-09
          02:16:51.198986500 +0000\n+++ /tmp/puppet-file20170809-3898-1buty4i\t2017-08-09
          02:17:04.522986818 +0000\n@@ -0,0 +1 @@\n+this is a test\n"
        source: "/Stage[main]/Main/File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]/content"
        tags:
        - notice
        - file
        - class
        - content
        time: '2017-08-09T02:17:04.528810728+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a/manifests/site.pp"
        line: 3
      - level: info
        message: Computing checksum on file /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:04.529730318+00:00'
        file: 
        line: 
      - level: info
        message: Filebucketed /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw to puppet
          with sum d41d8cd98f00b204e9800998ecf8427e
        source: "/Stage[main]/Main/File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]"
        tags:
        - info
        - file
        - class
        time: '2017-08-09T02:17:04.565121106+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a/manifests/site.pp"
        line: 3
      - level: notice
        message: content changed '{md5}d41d8cd98f00b204e9800998ecf8427e' to '{md5}e19c1283c925b3206685ff522acfe3e6'
        source: "/Stage[main]/Main/File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]/content"
        tags:
        - notice
        - file
        - class
        time: '2017-08-09T02:17:04.568796185+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a/manifests/site.pp"
        line: 3
      - level: notice
        message: Applied catalog in 0.07 seconds
        source: Puppet
        tags:
        - notice
        time: '2017-08-09T02:17:04.585646680+00:00'
        file: 
        line: 
      metrics:
        resources:
          name: resources
          label: Resources
          values:
          - - total
            - Total
            - 8
          - - skipped
            - Skipped
            - 0
          - - failed
            - Failed
            - 0
          - - failed_to_restart
            - Failed to restart
            - 0
          - - restarted
            - Restarted
            - 0
          - - changed
            - Changed
            - 1
          - - out_of_sync
            - Out of sync
            - 1
          - - scheduled
            - Scheduled
            - 0
          - - corrective_change
            - Corrective change
            - 0
        time:
          name: time
          label: Time
          values:
          - - file
            - File
            - 0.045872041
          - - schedule
            - Schedule
            - 0.00036485799999999997
          - - filebucket
            - Filebucket
            - 7.8758e-05
          - - config_retrieval
            - Config retrieval
            - 0.24616631000003508
          - - total
            - Total
            - 0.2924819670000351
        changes:
          name: changes
          label: Changes
          values:
          - - total
            - Total
            - 1
        events:
          name: events
          label: Events
          values:
          - - total
            - Total
            - 1
          - - failure
            - Failure
            - 0
          - - success
            - Success
            - 1
      resource_statuses:
        File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]:
          title: "/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw"
          file: "/etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a/manifests/site.pp"
          line: 3
          resource: File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]
          resource_type: File
          containment_path:
          - Stage[main]
          - Main
          - File[/tmp/corrective_change_new_resource_qgdeph5a.4VyLLw]
          evaluation_time: 0.045872041
          tags:
          - file
          - class
          time: '2017-08-09T02:17:04.523113441+00:00'
          failed: false
          changed: true
          out_of_sync: true
          skipped: false
          change_count: 1
          out_of_sync_count: 1
          events:
          - audited: false
            property: content
            previous_value: "{md5}d41d8cd98f00b204e9800998ecf8427e"
            desired_value: "{md5}e19c1283c925b3206685ff522acfe3e6"
            historical_value: 
            message: content changed '{md5}d41d8cd98f00b204e9800998ecf8427e' to '{md5}e19c1283c925b3206685ff522acfe3e6'
            name: content_changed
            status: success
            time: '2017-08-09T02:17:04.529341471+00:00'
            redacted: 
            corrective_change: false
          corrective_change: false
        Schedule[puppet]:
          title: puppet
          file: 
          line: 
          resource: Schedule[puppet]
          resource_type: Schedule
          containment_path:
          - Schedule[puppet]
          evaluation_time: 8.9877e-05
          tags:
          - schedule
          - puppet
          time: '2017-08-09T02:17:04.569837196+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[hourly]:
          title: hourly
          file: 
          line: 
          resource: Schedule[hourly]
          resource_type: Schedule
          containment_path:
          - Schedule[hourly]
          evaluation_time: 6.8209e-05
          tags:
          - schedule
          - hourly
          time: '2017-08-09T02:17:04.570033076+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[daily]:
          title: daily
          file: 
          line: 
          resource: Schedule[daily]
          resource_type: Schedule
          containment_path:
          - Schedule[daily]
          evaluation_time: 4.7841e-05
          tags:
          - schedule
          - daily
          time: '2017-08-09T02:17:04.570190770+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[weekly]:
          title: weekly
          file: 
          line: 
          resource: Schedule[weekly]
          resource_type: Schedule
          containment_path:
          - Schedule[weekly]
          evaluation_time: 4.8051e-05
          tags:
          - schedule
          - weekly
          time: '2017-08-09T02:17:04.570343429+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[monthly]:
          title: monthly
          file: 
          line: 
          resource: Schedule[monthly]
          resource_type: Schedule
          containment_path:
          - Schedule[monthly]
          evaluation_time: 6.2971e-05
          tags:
          - schedule
          - monthly
          time: '2017-08-09T02:17:04.570518792+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[never]:
          title: never
          file: 
          line: 
          resource: Schedule[never]
          resource_type: Schedule
          containment_path:
          - Schedule[never]
          evaluation_time: 4.7909e-05
          tags:
          - schedule
          - never
          time: '2017-08-09T02:17:04.570685115+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Filebucket[puppet]:
          title: puppet
          file: 
          line: 
          resource: Filebucket[puppet]
          resource_type: Filebucket
          containment_path:
          - Filebucket[puppet]
          evaluation_time: 7.8758e-05
          tags:
          - filebucket
          - puppet
          time: '2017-08-09T02:17:04.570857393+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
      corrective_change: false
      catalog_uuid: 9b5b628a-c252-4ddf-a960-d3937d6bf055
      cached_catalog_status: not_used
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.06 seconds
Begin teardown

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ rm -rf /etc/puppetlabs/code/environments/corrective_change_new_resource_qgdeph5a

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

* clean out produced resources
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ rm /tmp/corrective_change_new_resource_qgdeph5a.4VyLLw
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='tests/reports' name='corrective_change_outside_puppet.rb' time='22.050938'>
      <system-out>
        <![CDATA[
C98093 - a resource changed outside of Puppet will be reported as a corrective change
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ mkdir -p /tmp/corrective_change_outside_puppet_bo9sumc5/manifests /tmp/corrective_change_outside_puppet_bo9sumc5/modules; chmod -R 755 /tmp/corrective_change_outside_puppet_bo9sumc5
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ mkdir -p /etc/puppetlabs/code/environments; ln -sf /tmp/corrective_change_outside_puppet_bo9sumc5 /etc/puppetlabs/code/environments/corrective_change_outside_puppet_bo9sumc5
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ mktemp -t corrective_change_outside_puppet_bo9sumc5.XXXXXX
    /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
  
  * create file resource - site.pp to verify corrective change flag
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ mktemp -t apply_manifest.pp.XXXXXX
      /tmp/apply_manifest.pp.dCzCkw
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1nqzv9k centos7-64-1:/tmp/apply_manifest.pp.dCzCkw {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:46$ puppet apply --verbose --detailed-exitcodes /tmp/apply_manifest.pp.dCzCkw
      Notice: Compiled catalog for mfellvcjncqc2yd.delivery.puppetlabs.net in environment production in 0.03 seconds
      Info: Applying configuration version '1502245031'
      Notice: /Stage[main]/Main/File[/etc/puppetlabs/code/environments/corrective_change_outside_puppet_bo9sumc5/manifests/site.pp]/ensure: defined content as '{md5}7eca0022b7f5eec903ee60a4ab5fdc4a'
      Notice: Applied catalog in 0.02 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.51 seconds
    Exited: 2
  
  * run agent(s)
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:48$ mktemp -dt corrective_change_outside_puppet.rb.XXXXXX
      /tmp/corrective_change_outside_puppet.rb.oL5u7R
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
    Setting curl retries to 30
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:48$ puppet master --configprint confdir
      /etc/puppetlabs/puppet
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.85 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:49$ puppet master --configprint vardir
      /opt/puppetlabs/server/data/puppetserver
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:50$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:50$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
      {
        "jruby-puppet": {
          "ruby-load-path": [
            "/opt/puppetlabs/puppet/lib/ruby/vendor_ruby"
          ],
          "gem-home": "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
          "gem-path": [
            "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
            "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"
          ],
          "master-conf-dir": "/etc/puppetlabs/puppet",
          "master-code-dir": "/etc/puppetlabs/code",
          "master-var-dir": "/opt/puppetlabs/server/data/puppetserver",
          "master-run-dir": "/var/run/puppetlabs/puppetserver",
          "master-log-dir": "/var/log/puppetlabs/puppetserver"
        },
        "http-client": {
        },
        "profiler": {
        }
      }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-oznrny centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:50$ puppet master --configprint confdir
      /etc/puppetlabs/puppet
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.04 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:51$ test -e /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:51$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/corrective_change_outside_puppet.rb.oL5u7R/puppet.conf.bak
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:51$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.84 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:52$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.95 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:53$ cat /etc/puppetlabs/puppet/puppet.conf
      # This file can be used to override the default puppet settings.
      # See the following links for more details on what settings are available:
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
      [master]
      vardir = /opt/puppetlabs/server/data/puppetserver
      logdir = /var/log/puppetlabs/puppetserver
      rundir = /var/run/puppetlabs/puppetserver
      pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
      codedir = /etc/puppetlabs/code
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-hy4krg centos7-64-1:/tmp/corrective_change_outside_puppet.rb.oL5u7R/puppet.conf {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:53$ cat /etc/puppetlabs/puppet/puppet.conf
      [master]
      vardir = /opt/puppetlabs/server/data/puppetserver
      logdir = /var/log/puppetlabs/puppetserver
      rundir = /var/run/puppetlabs/puppetserver
      pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
      codedir = /etc/puppetlabs/code
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:53$ service puppetserver reload
      Redirecting to /bin/systemctl reload  puppetserver.service
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 4.39 seconds
    
    * Run agent once to create new File resource
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:21:57$ puppet agent -t --environment corrective_change_outside_puppet_bo9sumc5 --server mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Using configured environment 'corrective_change_outside_puppet_bo9sumc5'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245043'
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]/content: 
        --- /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm	2017-08-09 02:17:10.075986950 +0000
        +++ /tmp/puppet-file20170809-4297-aadsco	2017-08-09 02:17:23.452987269 +0000
        @@ -0,0 +1 @@
        +this is a test
        
        Info: Computing checksum on file /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm
        Info: FileBucket got a duplicate file {md5}d41d8cd98f00b204e9800998ecf8427e
        Info: /Stage[main]/Main/File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]: Filebucketed /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm to puppet with sum d41d8cd98f00b204e9800998ecf8427e
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]/content: content changed '{md5}d41d8cd98f00b204e9800998ecf8427e' to '{md5}e19c1283c925b3206685ff522acfe3e6'
        Notice: Applied catalog in 0.07 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.41 seconds
      Exited: 2
    
    * Verify the file resource is created
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:00$ cat /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm
        this is a test
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    * Delete the file
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:00$ rm /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    * Run agent to correct the files absence
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:00$ puppet agent -t --environment corrective_change_outside_puppet_bo9sumc5 --server mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Using configured environment 'corrective_change_outside_puppet_bo9sumc5'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245045'
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]/ensure: defined content as '{md5}e19c1283c925b3206685ff522acfe3e6'
        Notice: Applied catalog in 0.02 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.09 seconds
      Exited: 2
    
    * Verify the file resource is created
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:02$ cat /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm
        this is a test
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:02$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.93 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:03$ if [ -f '/tmp/corrective_change_outside_puppet.rb.oL5u7R/puppet.conf.bak' ]; then cat '/tmp/corrective_change_outside_puppet.rb.oL5u7R/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/corrective_change_outside_puppet.rb.oL5u7R/puppet.conf.bak'; fi
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:03$ service puppetserver reload
      Redirecting to /bin/systemctl reload  puppetserver.service
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 4.26 seconds
  
  * Check report
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:07$ puppet config print statedir
      /opt/puppetlabs/puppet/cache/state
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.84 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ cat /opt/puppetlabs/puppet/cache/state/last_run_report.yaml
      --- !ruby/object:Puppet::Transaction::Report
      host: mfellvcjncqc2yd.delivery.puppetlabs.net
      time: '2017-08-09T02:17:25.084005884+00:00'
      configuration_version: 1502245045
      transaction_uuid: 17e05b8d-c454-4a1b-9440-cbf79839ce84
      report_format: 7
      puppet_version: 5.0.1
      status: changed
      noop: false
      noop_pending: false
      environment: corrective_change_outside_puppet_bo9sumc5
      logs:
      - level: info
        message: Using configured environment 'corrective_change_outside_puppet_bo9sumc5'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:25.265213154+00:00'
        file: 
        line: 
      - level: info
        message: Retrieving pluginfacts
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:25.265625155+00:00'
        file: 
        line: 
      - level: info
        message: Retrieving plugin
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:25.318012223+00:00'
        file: 
        line: 
      - level: info
        message: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:25.631876239+00:00'
        file: 
        line: 
      - level: info
        message: Applying configuration version '1502245045'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:25.669786472+00:00'
        file: 
        line: 
      - level: notice
        message: defined content as '{md5}e19c1283c925b3206685ff522acfe3e6'
        source: "/Stage[main]/Main/File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]/ensure"
        tags:
        - notice
        - file
        - class
        time: '2017-08-09T02:17:25.677299798+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_outside_puppet_bo9sumc5/manifests/site.pp"
        line: 3
      - level: notice
        message: Applied catalog in 0.02 seconds
        source: Puppet
        tags:
        - notice
        time: '2017-08-09T02:17:25.689940522+00:00'
        file: 
        line: 
      metrics:
        resources:
          name: resources
          label: Resources
          values:
          - - total
            - Total
            - 8
          - - skipped
            - Skipped
            - 0
          - - failed
            - Failed
            - 0
          - - failed_to_restart
            - Failed to restart
            - 0
          - - restarted
            - Restarted
            - 0
          - - changed
            - Changed
            - 1
          - - out_of_sync
            - Out of sync
            - 1
          - - scheduled
            - Scheduled
            - 0
          - - corrective_change
            - Corrective change
            - 1
        time:
          name: time
          label: Time
          values:
          - - file
            - File
            - 0.004546588
          - - schedule
            - Schedule
            - 0.00044238599999999996
          - - filebucket
            - Filebucket
            - 7.1245e-05
          - - config_retrieval
            - Config retrieval
            - 0.1547554429999991
          - - total
            - Total
            - 0.1598156619999991
        changes:
          name: changes
          label: Changes
          values:
          - - total
            - Total
            - 1
        events:
          name: events
          label: Events
          values:
          - - total
            - Total
            - 1
          - - failure
            - Failure
            - 0
          - - success
            - Success
            - 1
      resource_statuses:
        File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]:
          title: "/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm"
          file: "/etc/puppetlabs/code/environments/corrective_change_outside_puppet_bo9sumc5/manifests/site.pp"
          line: 3
          resource: File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]
          resource_type: File
          containment_path:
          - Stage[main]
          - Main
          - File[/tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm]
          evaluation_time: 0.004546588
          tags:
          - file
          - class
          time: '2017-08-09T02:17:25.672906050+00:00'
          failed: false
          changed: true
          out_of_sync: true
          skipped: false
          change_count: 1
          out_of_sync_count: 1
          events:
          - audited: false
            property: ensure
            previous_value: absent
            desired_value: file
            historical_value: 
            message: defined content as '{md5}e19c1283c925b3206685ff522acfe3e6'
            name: file_created
            status: success
            time: '2017-08-09T02:17:25.673278242+00:00'
            redacted: 
            corrective_change: true
          corrective_change: true
        Schedule[puppet]:
          title: puppet
          file: 
          line: 
          resource: Schedule[puppet]
          resource_type: Schedule
          containment_path:
          - Schedule[puppet]
          evaluation_time: 9.0702e-05
          tags:
          - schedule
          - puppet
          time: '2017-08-09T02:17:25.678228428+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[hourly]:
          title: hourly
          file: 
          line: 
          resource: Schedule[hourly]
          resource_type: Schedule
          containment_path:
          - Schedule[hourly]
          evaluation_time: 8.3632e-05
          tags:
          - schedule
          - hourly
          time: '2017-08-09T02:17:25.678424516+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[daily]:
          title: daily
          file: 
          line: 
          resource: Schedule[daily]
          resource_type: Schedule
          containment_path:
          - Schedule[daily]
          evaluation_time: 8.5423e-05
          tags:
          - schedule
          - daily
          time: '2017-08-09T02:17:25.678663994+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[weekly]:
          title: weekly
          file: 
          line: 
          resource: Schedule[weekly]
          resource_type: Schedule
          containment_path:
          - Schedule[weekly]
          evaluation_time: 6.9505e-05
          tags:
          - schedule
          - weekly
          time: '2017-08-09T02:17:25.678855522+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[monthly]:
          title: monthly
          file: 
          line: 
          resource: Schedule[monthly]
          resource_type: Schedule
          containment_path:
          - Schedule[monthly]
          evaluation_time: 6.713e-05
          tags:
          - schedule
          - monthly
          time: '2017-08-09T02:17:25.679034309+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[never]:
          title: never
          file: 
          line: 
          resource: Schedule[never]
          resource_type: Schedule
          containment_path:
          - Schedule[never]
          evaluation_time: 4.5994e-05
          tags:
          - schedule
          - never
          time: '2017-08-09T02:17:25.679232435+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Filebucket[puppet]:
          title: puppet
          file: 
          line: 
          resource: Filebucket[puppet]
          resource_type: Filebucket
          containment_path:
          - Filebucket[puppet]
          evaluation_time: 7.1245e-05
          tags:
          - filebucket
          - puppet
          time: '2017-08-09T02:17:25.679402361+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
      corrective_change: true
      catalog_uuid: 4f170d7a-3192-4e16-81a0-910e566bcb44
      cached_catalog_status: not_used
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.05 seconds
Begin teardown

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ rm -rf /etc/puppetlabs/code/environments/corrective_change_outside_puppet_bo9sumc5

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

* clean out produced resources
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ rm /tmp/corrective_change_outside_puppet_bo9sumc5.zjFdcm
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='tests/reports' name='corrective_change_via_puppet.rb' time='23.007808'>
      <system-out>
        <![CDATA[
C98094 - a resource changed via Puppet manifest will not be reported as a corrective change
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ mkdir -p /tmp/corrective_change_via_puppet_rqzwu86s/manifests /tmp/corrective_change_via_puppet_rqzwu86s/modules; chmod -R 755 /tmp/corrective_change_via_puppet_rqzwu86s
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ mkdir -p /etc/puppetlabs/code/environments; ln -sf /tmp/corrective_change_via_puppet_rqzwu86s /etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ mktemp -t corrective_change_via_puppet_rqzwu86s.XXXXXX
    /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  * create file resource in site.pp
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ mktemp -t apply_manifest.pp.XXXXXX
      /tmp/apply_manifest.pp.mIb9wG
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-8y0ymu centos7-64-1:/tmp/apply_manifest.pp.mIb9wG {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:08$ puppet apply --verbose --detailed-exitcodes /tmp/apply_manifest.pp.mIb9wG
      Notice: Compiled catalog for mfellvcjncqc2yd.delivery.puppetlabs.net in environment production in 0.02 seconds
      Info: Applying configuration version '1502245053'
      Notice: /Stage[main]/Main/File[/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp]/ensure: defined content as '{md5}07bfa218211633eb9a04916d21d8f368'
      Notice: Applied catalog in 0.04 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.68 seconds
    Exited: 2
  
  * run agent(s) to create the new resource
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:10$ mktemp -dt corrective_change_via_puppet.rb.XXXXXX
      /tmp/corrective_change_via_puppet.rb.33ddTM
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    Setting curl retries to 30
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:10$ puppet master --configprint confdir
      /etc/puppetlabs/puppet
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.98 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:11$ puppet master --configprint vardir
      /opt/puppetlabs/server/data/puppetserver
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.80 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:12$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:12$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
      {
        "jruby-puppet": {
          "ruby-load-path": [
            "/opt/puppetlabs/puppet/lib/ruby/vendor_ruby"
          ],
          "gem-home": "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
          "gem-path": [
            "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
            "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"
          ],
          "master-conf-dir": "/etc/puppetlabs/puppet",
          "master-code-dir": "/etc/puppetlabs/code",
          "master-var-dir": "/opt/puppetlabs/server/data/puppetserver",
          "master-run-dir": "/var/run/puppetlabs/puppetserver",
          "master-log-dir": "/var/log/puppetlabs/puppetserver"
        },
        "http-client": {
        },
        "profiler": {
        }
      }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-pv6poc centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:12$ puppet master --configprint confdir
      /etc/puppetlabs/puppet
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.96 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:13$ test -e /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:13$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/corrective_change_via_puppet.rb.33ddTM/puppet.conf.bak
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:13$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.86 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:14$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:15$ cat /etc/puppetlabs/puppet/puppet.conf
      # This file can be used to override the default puppet settings.
      # See the following links for more details on what settings are available:
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
      # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
      [master]
      vardir = /opt/puppetlabs/server/data/puppetserver
      logdir = /var/log/puppetlabs/puppetserver
      rundir = /var/run/puppetlabs/puppetserver
      pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
      codedir = /etc/puppetlabs/code
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1110dyf centos7-64-1:/tmp/corrective_change_via_puppet.rb.33ddTM/puppet.conf {:ignore => }
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:15$ cat /etc/puppetlabs/puppet/puppet.conf
      [master]
      vardir = /opt/puppetlabs/server/data/puppetserver
      logdir = /var/log/puppetlabs/puppetserver
      rundir = /var/run/puppetlabs/puppetserver
      pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
      codedir = /etc/puppetlabs/code
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:15$ service puppetserver reload
      Redirecting to /bin/systemctl reload  puppetserver.service
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 4.39 seconds
    
    * Run agent once to create new File resource
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:19$ puppet agent -t --environment corrective_change_via_puppet_rqzwu86s --server mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Using configured environment 'corrective_change_via_puppet_rqzwu86s'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245065'
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]/content: 
        --- /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku	2017-08-09 02:17:32.124987476 +0000
        +++ /tmp/puppet-file20170809-4754-1adxoxy	2017-08-09 02:17:45.620987798 +0000
        @@ -0,0 +1 @@
        +this is my original important data
        
        Info: Computing checksum on file /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
        Info: FileBucket got a duplicate file {md5}d41d8cd98f00b204e9800998ecf8427e
        Info: /Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]: Filebucketed /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku to puppet with sum d41d8cd98f00b204e9800998ecf8427e
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]/content: content changed '{md5}d41d8cd98f00b204e9800998ecf8427e' to '{md5}3af9ddea1d789f7cf98376a444fe52ea'
        Notice: Applied catalog in 0.07 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.47 seconds
      Exited: 2
    
    * Verify the file resource is created
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:22$ cat /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
        this is my original important data
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    * Change the manifest for the resource
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:22$ mktemp -t apply_manifest.pp.XXXXXX
        /tmp/apply_manifest.pp.1o4aXG
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
      localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-pbv0j3 centos7-64-1:/tmp/apply_manifest.pp.1o4aXG {:ignore => }
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:22$ puppet apply --verbose --detailed-exitcodes /tmp/apply_manifest.pp.1o4aXG
        Notice: Compiled catalog for mfellvcjncqc2yd.delivery.puppetlabs.net in environment production in 0.02 seconds
        Info: Applying configuration version '1502245067'
        Info: Computing checksum on file /etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp
        Info: /Stage[main]/Main/File[/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp]: Filebucketed /etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp to puppet with sum 07bfa218211633eb9a04916d21d8f368
        Notice: /Stage[main]/Main/File[/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp]/content: content changed '{md5}07bfa218211633eb9a04916d21d8f368' to '{md5}a04bcb270247acd2e378e435b8cfa96f'
        Notice: Applied catalog in 0.07 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.66 seconds
      Exited: 2
    
    * Run agent a 2nd time to change the File resource
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:24$ puppet agent -t --environment corrective_change_via_puppet_rqzwu86s --server mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Using configured environment 'corrective_change_via_puppet_rqzwu86s'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245069'
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]/content: 
        --- /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku	2017-08-09 02:17:45.661987799 +0000
        +++ /tmp/puppet-file20170809-4880-aaqisx	2017-08-09 02:17:49.679987894 +0000
        @@ -1 +1 @@
        -this is my original important data
        +this is my modified important data
        Info: Computing checksum on file /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
        Info: /Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]: Filebucketed /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku to puppet with sum 3af9ddea1d789f7cf98376a444fe52ea
        Notice: /Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]/content: content changed '{md5}3af9ddea1d789f7cf98376a444fe52ea' to '{md5}e3a5fb22e6df3b9ccb5786b516bdff57'
        Notice: Applied catalog in 0.06 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.15 seconds
      Exited: 2
    
    * Verify the file resource is created
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:26$ cat /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
        this is my modified important data
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:26$ puppet master --configprint config
      /etc/puppetlabs/puppet/puppet.conf
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.88 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:27$ if [ -f '/tmp/corrective_change_via_puppet.rb.33ddTM/puppet.conf.bak' ]; then cat '/tmp/corrective_change_via_puppet.rb.33ddTM/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/corrective_change_via_puppet.rb.33ddTM/puppet.conf.bak'; fi
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:27$ service puppetserver reload
      Redirecting to /bin/systemctl reload  puppetserver.service
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 3.34 seconds
  
  * Check report
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:30$ puppet config print statedir
      /opt/puppetlabs/puppet/cache/state
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.79 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:31$ cat /opt/puppetlabs/puppet/cache/state/last_run_report.yaml
      --- !ruby/object:Puppet::Transaction::Report
      host: mfellvcjncqc2yd.delivery.puppetlabs.net
      time: '2017-08-09T02:17:49.096467895+00:00'
      configuration_version: 1502245069
      transaction_uuid: 27904254-57ac-4790-a968-bb0fdefdc02c
      report_format: 7
      puppet_version: 5.0.1
      status: changed
      noop: false
      noop_pending: false
      environment: corrective_change_via_puppet_rqzwu86s
      logs:
      - level: info
        message: Using configured environment 'corrective_change_via_puppet_rqzwu86s'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:49.254757620+00:00'
        file: 
        line: 
      - level: info
        message: Retrieving pluginfacts
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:49.255099843+00:00'
        file: 
        line: 
      - level: info
        message: Retrieving plugin
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:49.329041022+00:00'
        file: 
        line: 
      - level: info
        message: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:49.624578947+00:00'
        file: 
        line: 
      - level: info
        message: Applying configuration version '1502245069'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:49.674038309+00:00'
        file: 
        line: 
      - level: notice
        message: "\n--- /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku\t2017-08-09 02:17:45.661987799
          +0000\n+++ /tmp/puppet-file20170809-4880-aaqisx\t2017-08-09 02:17:49.679987894
          +0000\n@@ -1 +1 @@\n-this is my original important data\n+this is my modified
          important data\n"
        source: "/Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]/content"
        tags:
        - notice
        - file
        - class
        - content
        time: '2017-08-09T02:17:49.684022295+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp"
        line: 3
      - level: info
        message: Computing checksum on file /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:17:49.685492910+00:00'
        file: 
        line: 
      - level: info
        message: Filebucketed /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku to puppet
          with sum 3af9ddea1d789f7cf98376a444fe52ea
        source: "/Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]"
        tags:
        - info
        - file
        - class
        time: '2017-08-09T02:17:49.706974517+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp"
        line: 3
      - level: notice
        message: content changed '{md5}3af9ddea1d789f7cf98376a444fe52ea' to '{md5}e3a5fb22e6df3b9ccb5786b516bdff57'
        source: "/Stage[main]/Main/File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]/content"
        tags:
        - notice
        - file
        - class
        time: '2017-08-09T02:17:49.711237609+00:00'
        file: "/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp"
        line: 3
      - level: notice
        message: Applied catalog in 0.06 seconds
        source: Puppet
        tags:
        - notice
        time: '2017-08-09T02:17:49.726042857+00:00'
        file: 
        line: 
      metrics:
        resources:
          name: resources
          label: Resources
          values:
          - - total
            - Total
            - 8
          - - skipped
            - Skipped
            - 0
          - - failed
            - Failed
            - 0
          - - failed_to_restart
            - Failed to restart
            - 0
          - - restarted
            - Restarted
            - 0
          - - changed
            - Changed
            - 1
          - - out_of_sync
            - Out of sync
            - 1
          - - scheduled
            - Scheduled
            - 0
          - - corrective_change
            - Corrective change
            - 0
        time:
          name: time
          label: Time
          values:
          - - file
            - File
            - 0.031750928
          - - schedule
            - Schedule
            - 0.00033348700000000004
          - - filebucket
            - Filebucket
            - 6.2695e-05
          - - config_retrieval
            - Config retrieval
            - 0.12390130099993257
          - - total
            - Total
            - 0.15604841099993258
        changes:
          name: changes
          label: Changes
          values:
          - - total
            - Total
            - 1
        events:
          name: events
          label: Events
          values:
          - - total
            - Total
            - 1
          - - failure
            - Failure
            - 0
          - - success
            - Success
            - 1
      resource_statuses:
        File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]:
          title: "/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku"
          file: "/etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s/manifests/site.pp"
          line: 3
          resource: File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]
          resource_type: File
          containment_path:
          - Stage[main]
          - Main
          - File[/tmp/corrective_change_via_puppet_rqzwu86s.WIUtku]
          evaluation_time: 0.031750928
          tags:
          - file
          - class
          time: '2017-08-09T02:17:49.679677206+00:00'
          failed: false
          changed: true
          out_of_sync: true
          skipped: false
          change_count: 1
          out_of_sync_count: 1
          events:
          - audited: false
            property: content
            previous_value: "{md5}3af9ddea1d789f7cf98376a444fe52ea"
            desired_value: "{md5}e3a5fb22e6df3b9ccb5786b516bdff57"
            historical_value: 
            message: content changed '{md5}3af9ddea1d789f7cf98376a444fe52ea' to '{md5}e3a5fb22e6df3b9ccb5786b516bdff57'
            name: content_changed
            status: success
            time: '2017-08-09T02:17:49.685206367+00:00'
            redacted: 
            corrective_change: false
          corrective_change: false
        Schedule[puppet]:
          title: puppet
          file: 
          line: 
          resource: Schedule[puppet]
          resource_type: Schedule
          containment_path:
          - Schedule[puppet]
          evaluation_time: 6.5239e-05
          tags:
          - schedule
          - puppet
          time: '2017-08-09T02:17:49.712258514+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[hourly]:
          title: hourly
          file: 
          line: 
          resource: Schedule[hourly]
          resource_type: Schedule
          containment_path:
          - Schedule[hourly]
          evaluation_time: 4.9304e-05
          tags:
          - schedule
          - hourly
          time: '2017-08-09T02:17:49.712413990+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[daily]:
          title: daily
          file: 
          line: 
          resource: Schedule[daily]
          resource_type: Schedule
          containment_path:
          - Schedule[daily]
          evaluation_time: 6.6352e-05
          tags:
          - schedule
          - daily
          time: '2017-08-09T02:17:49.712568521+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[weekly]:
          title: weekly
          file: 
          line: 
          resource: Schedule[weekly]
          resource_type: Schedule
          containment_path:
          - Schedule[weekly]
          evaluation_time: 4.7828e-05
          tags:
          - schedule
          - weekly
          time: '2017-08-09T02:17:49.712723141+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[monthly]:
          title: monthly
          file: 
          line: 
          resource: Schedule[monthly]
          resource_type: Schedule
          containment_path:
          - Schedule[monthly]
          evaluation_time: 5.5425e-05
          tags:
          - schedule
          - monthly
          time: '2017-08-09T02:17:49.712887818+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[never]:
          title: never
          file: 
          line: 
          resource: Schedule[never]
          resource_type: Schedule
          containment_path:
          - Schedule[never]
          evaluation_time: 4.9339e-05
          tags:
          - schedule
          - never
          time: '2017-08-09T02:17:49.713055538+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Filebucket[puppet]:
          title: puppet
          file: 
          line: 
          resource: Filebucket[puppet]
          resource_type: Filebucket
          containment_path:
          - Filebucket[puppet]
          evaluation_time: 6.2695e-05
          tags:
          - filebucket
          - puppet
          time: '2017-08-09T02:17:49.713240617+00:00'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
      corrective_change: false
      catalog_uuid: 67cb48fa-ca78-451e-9955-5f275b0c7918
      cached_catalog_status: not_used
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.06 seconds
Begin teardown

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:31$ rm -rf /etc/puppetlabs/code/environments/corrective_change_via_puppet_rqzwu86s

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

* clean out produced resources
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:31$ rm /tmp/corrective_change_via_puppet_rqzwu86s.WIUtku
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='tests/reports' name='failover_master.rb' time='60.415745'>
      <system-out>
        <![CDATA[
The report specifies which master was contacted during failover
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:31$ puppet master --configprint user
    puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:32$ getent passwd puppet
    puppet:x:996:994:puppetserver daemon:/opt/puppetlabs/server/data/puppetserver:/sbin/nologin
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:32$ mktemp -dt report_dir.XXXXXX
    /tmp/report_dir.tcdkD2
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:32$ chown puppet:puppet /tmp/report_dir.tcdkD2
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.12 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:32$ mktemp -dt failover_master.rb.XXXXXX
    /tmp/failover_master.rb.t3m3K5
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  Setting curl retries to 30
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:32$ puppet master --configprint confdir
    /etc/puppetlabs/puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.00 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:33$ puppet master --configprint vardir
    /opt/puppetlabs/server/data/puppetserver
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.93 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:34$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:34$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
    {
      "jruby-puppet": {
        "ruby-load-path": [
          "/opt/puppetlabs/puppet/lib/ruby/vendor_ruby"
        ],
        "gem-home": "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
        "gem-path": [
          "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
          "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"
        ],
        "master-conf-dir": "/etc/puppetlabs/puppet",
        "master-code-dir": "/etc/puppetlabs/code",
        "master-var-dir": "/opt/puppetlabs/server/data/puppetserver",
        "master-run-dir": "/var/run/puppetlabs/puppetserver",
        "master-log-dir": "/var/log/puppetlabs/puppetserver"
      },
      "http-client": {
      },
      "profiler": {
      }
    }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-vlovuv centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:34$ puppet master --configprint confdir
    /etc/puppetlabs/puppet
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.99 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:35$ test -e /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:35$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/failover_master.rb.t3m3K5/puppet.conf.bak
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:35$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.91 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:36$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:37$ cat /etc/puppetlabs/puppet/puppet.conf
    # This file can be used to override the default puppet settings.
    # See the following links for more details on what settings are available:
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
    # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
    [master]
    vardir = /opt/puppetlabs/server/data/puppetserver
    logdir = /var/log/puppetlabs/puppetserver
    rundir = /var/run/puppetlabs/puppetserver
    pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
    codedir = /etc/puppetlabs/code
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1ck3hqg centos7-64-1:/tmp/failover_master.rb.t3m3K5/puppet.conf {:ignore => }
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:37$ cat /etc/puppetlabs/puppet/puppet.conf
    [master]
    vardir = /opt/puppetlabs/server/data/puppetserver
    logdir = /var/log/puppetlabs/puppetserver
    rundir = /var/run/puppetlabs/puppetserver
    pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
    codedir = /etc/puppetlabs/code
    
    [master]
    reportdir = /tmp/report_dir.tcdkD2
    reports = store
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:37$ service puppetserver reload
    Redirecting to /bin/systemctl reload  puppetserver.service
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 4.25 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:42$ mktemp -t puppet_conf_test.XXXXXX
    /tmp/puppet_conf_test.LTXYI9
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  * master_used field should be the name and port of the successfully contacted master when failover is active
    
    * no failover, successfully contact first master in the list
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:42$ puppet agent -t --config /tmp/puppet_conf_test.LTXYI9 --server_list=mfellvcjncqc2yd.delivery.puppetlabs.net:8140,badmaster:22
        Info: Using configured environment 'production'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245087'
        Notice: Applied catalog in 0.03 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.33 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:44$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.85 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:45$ cat /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
        --- !ruby/object:Puppet::Transaction::Report
        host: mfellvcjncqc2yd.delivery.puppetlabs.net
        time: '2017-08-09T02:18:07.141028560Z'
        configuration_version: 1502245087
        transaction_uuid: 012dff36-0b45-40c2-a8af-2dd8895ee2b7
        report_format: 7
        puppet_version: 5.0.1
        status: unchanged
        noop: false
        noop_pending: false
        environment: production
        logs:
        - level: info
          message: Using configured environment 'production'
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:07.435110962Z'
          file:
          line:
        - level: info
          message: Retrieving pluginfacts
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:07.435446417Z'
          file:
          line:
        - level: info
          message: Retrieving plugin
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:07.502845264Z'
          file:
          line:
        - level: info
          message: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:07.847968878Z'
          file:
          line:
        - level: info
          message: Applying configuration version '1502245087'
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:07.894638450Z'
          file:
          line:
        - level: notice
          message: Applied catalog in 0.03 seconds
          source: Puppet
          tags:
          - notice
          time: '2017-08-09T02:18:07.915980728Z'
          file:
          line:
        metrics:
          resources:
            name: resources
            label: Resources
            values:
            - - total
              - Total
              - 7
            - - skipped
              - Skipped
              - 0
            - - failed
              - Failed
              - 0
            - - failed_to_restart
              - Failed to restart
              - 0
            - - restarted
              - Restarted
              - 0
            - - changed
              - Changed
              - 0
            - - out_of_sync
              - Out of sync
              - 0
            - - scheduled
              - Scheduled
              - 0
            - - corrective_change
              - Corrective change
              - 0
          time:
            name: time
            label: Time
            values:
            - - schedule
              - Schedule
              - 0.000350011
            - - filebucket
              - Filebucket
              - 8.7778e-05
            - - config_retrieval
              - Config retrieval
              - 0.16763163600001008
            - - total
              - Total
              - 0.16806942500001007
          changes:
            name: changes
            label: Changes
            values:
            - - total
              - Total
              - 0
          events:
            name: events
            label: Events
            values:
            - - total
              - Total
              - 0
            - - failure
              - Failure
              - 0
            - - success
              - Success
              - 0
        resource_statuses:
          Schedule[puppet]:
            title: puppet
            file:
            line:
            resource: Schedule[puppet]
            resource_type: Schedule
            containment_path:
            - Schedule[puppet]
            evaluation_time: 6.863e-05
            tags:
            - schedule
            - puppet
            time: '2017-08-09T02:18:07.901109277Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[hourly]:
            title: hourly
            file:
            line:
            resource: Schedule[hourly]
            resource_type: Schedule
            containment_path:
            - Schedule[hourly]
            evaluation_time: 5.2111e-05
            tags:
            - schedule
            - hourly
            time: '2017-08-09T02:18:07.901272524Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[daily]:
            title: daily
            file:
            line:
            resource: Schedule[daily]
            resource_type: Schedule
            containment_path:
            - Schedule[daily]
            evaluation_time: 7.4651e-05
            tags:
            - schedule
            - daily
            time: '2017-08-09T02:18:07.902022961Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[weekly]:
            title: weekly
            file:
            line:
            resource: Schedule[weekly]
            resource_type: Schedule
            containment_path:
            - Schedule[weekly]
            evaluation_time: 5.059e-05
            tags:
            - schedule
            - weekly
            time: '2017-08-09T02:18:07.902192412Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[monthly]:
            title: monthly
            file:
            line:
            resource: Schedule[monthly]
            resource_type: Schedule
            containment_path:
            - Schedule[monthly]
            evaluation_time: 5.2521e-05
            tags:
            - schedule
            - monthly
            time: '2017-08-09T02:18:07.902334354Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[never]:
            title: never
            file:
            line:
            resource: Schedule[never]
            resource_type: Schedule
            containment_path:
            - Schedule[never]
            evaluation_time: 5.1508e-05
            tags:
            - schedule
            - never
            time: '2017-08-09T02:18:07.903097560Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Filebucket[puppet]:
            title: puppet
            file:
            line:
            resource: Filebucket[puppet]
            resource_type: Filebucket
            containment_path:
            - Filebucket[puppet]
            evaluation_time: 8.7778e-05
            tags:
            - filebucket
            - puppet
            time: '2017-08-09T02:18:07.903254356Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
        corrective_change: false
        master_used: mfellvcjncqc2yd.delivery.puppetlabs.net:8140
        catalog_uuid: e7e7fb71-32d6-4ffe-9f1e-eac74f03e9db
        cached_catalog_status: not_used
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.05 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:45$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.86 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:46$ rm -rf /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    * failover occurred, successfully report contact with first viable master
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:46$ puppet agent -t --config /tmp/puppet_conf_test.LTXYI9 --server_list=badmaster:22,mfellvcjncqc2yd.delivery.puppetlabs.net:8140
        Info: Using configured environment 'production'
        Info: Retrieving pluginfacts
        Info: Retrieving plugin
        Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        Info: Applying configuration version '1502245091'
        Notice: Applied catalog in 0.02 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.19 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:48$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.86 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:49$ cat /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
        --- !ruby/object:Puppet::Transaction::Report
        host: mfellvcjncqc2yd.delivery.puppetlabs.net
        time: '2017-08-09T02:18:11.308053835Z'
        configuration_version: 1502245091
        transaction_uuid: 0e24e29c-ddef-456b-a509-35d07f06fae6
        report_format: 7
        puppet_version: 5.0.1
        status: unchanged
        noop: false
        noop_pending: false
        environment: production
        logs:
        - level: info
          message: Using configured environment 'production'
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:11.486957311Z'
          file:
          line:
        - level: info
          message: Retrieving pluginfacts
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:11.487339730Z'
          file:
          line:
        - level: info
          message: Retrieving plugin
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:11.534942753Z'
          file:
          line:
        - level: info
          message: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:11.822938640Z'
          file:
          line:
        - level: info
          message: Applying configuration version '1502245091'
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:11.879700719Z'
          file:
          line:
        - level: notice
          message: Applied catalog in 0.02 seconds
          source: Puppet
          tags:
          - notice
          time: '2017-08-09T02:18:11.892233713Z'
          file:
          line:
        metrics:
          resources:
            name: resources
            label: Resources
            values:
            - - total
              - Total
              - 7
            - - skipped
              - Skipped
              - 0
            - - failed
              - Failed
              - 0
            - - failed_to_restart
              - Failed to restart
              - 0
            - - restarted
              - Restarted
              - 0
            - - changed
              - Changed
              - 0
            - - out_of_sync
              - Out of sync
              - 0
            - - scheduled
              - Scheduled
              - 0
            - - corrective_change
              - Corrective change
              - 0
          time:
            name: time
            label: Time
            values:
            - - schedule
              - Schedule
              - 0.00044069700000000004
            - - filebucket
              - Filebucket
              - 7.9725e-05
            - - config_retrieval
              - Config retrieval
              - 0.13049907200002053
            - - total
              - Total
              - 0.13101949400002053
          changes:
            name: changes
            label: Changes
            values:
            - - total
              - Total
              - 0
          events:
            name: events
            label: Events
            values:
            - - total
              - Total
              - 0
            - - failure
              - Failure
              - 0
            - - success
              - Success
              - 0
        resource_statuses:
          Schedule[puppet]:
            title: puppet
            file:
            line:
            resource: Schedule[puppet]
            resource_type: Schedule
            containment_path:
            - Schedule[puppet]
            evaluation_time: 9.0048e-05
            tags:
            - schedule
            - puppet
            time: '2017-08-09T02:18:11.882652217Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[hourly]:
            title: hourly
            file:
            line:
            resource: Schedule[hourly]
            resource_type: Schedule
            containment_path:
            - Schedule[hourly]
            evaluation_time: 6.7408e-05
            tags:
            - schedule
            - hourly
            time: '2017-08-09T02:18:11.882850272Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[daily]:
            title: daily
            file:
            line:
            resource: Schedule[daily]
            resource_type: Schedule
            containment_path:
            - Schedule[daily]
            evaluation_time: 7.0954e-05
            tags:
            - schedule
            - daily
            time: '2017-08-09T02:18:11.883002843Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[weekly]:
            title: weekly
            file:
            line:
            resource: Schedule[weekly]
            resource_type: Schedule
            containment_path:
            - Schedule[weekly]
            evaluation_time: 6.8064e-05
            tags:
            - schedule
            - weekly
            time: '2017-08-09T02:18:11.883168048Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[monthly]:
            title: monthly
            file:
            line:
            resource: Schedule[monthly]
            resource_type: Schedule
            containment_path:
            - Schedule[monthly]
            evaluation_time: 8.8103e-05
            tags:
            - schedule
            - monthly
            time: '2017-08-09T02:18:11.883339938Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Schedule[never]:
            title: never
            file:
            line:
            resource: Schedule[never]
            resource_type: Schedule
            containment_path:
            - Schedule[never]
            evaluation_time: 5.612e-05
            tags:
            - schedule
            - never
            time: '2017-08-09T02:18:11.883509751Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
          Filebucket[puppet]:
            title: puppet
            file:
            line:
            resource: Filebucket[puppet]
            resource_type: Filebucket
            containment_path:
            - Filebucket[puppet]
            evaluation_time: 7.9725e-05
            tags:
            - filebucket
            - puppet
            time: '2017-08-09T02:18:11.883700271Z'
            failed: false
            changed: false
            out_of_sync: false
            skipped: false
            change_count: 0
            out_of_sync_count: 0
            events: []
            corrective_change: false
        corrective_change: false
        master_used: mfellvcjncqc2yd.delivery.puppetlabs.net:8140
        catalog_uuid: 03f4db61-e9d3-4019-9659-648a5aa710fa
        cached_catalog_status: not_used
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.05 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:49$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.87 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:50$ rm -rf /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
    
    * master_field should not appear when no master could be conatacted
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:22:50$ puppet agent -t --config /tmp/puppet_conf_test.LTXYI9 --server_list=badmaster:1 --http_connect_timeout=5s --report_server=mfellvcjncqc2yd.delivery.puppetlabs.net
        Warning: Could not select a functional puppet master
        Info: Retrieving pluginfacts
        Warning: Unable to fetch my node definition, but the agent run will continue:
        Warning: execution expired
        Error: /File[/opt/puppetlabs/puppet/cache/facts.d]: Failed to generate additional resources using 'eval_generate': execution expired
        Info: Retrieving plugin
        Error: /File[/opt/puppetlabs/puppet/cache/facts.d]: Could not evaluate: Could not retrieve file metadata for puppet:///pluginfacts: execution expired
        Error: /File[/opt/puppetlabs/puppet/cache/lib]: Failed to generate additional resources using 'eval_generate': execution expired
        Error: /File[/opt/puppetlabs/puppet/cache/lib]: Could not evaluate: Could not retrieve file metadata for puppet:///plugins: execution expired
        Error: Could not retrieve catalog from remote server: execution expired
        Warning: Not using cache on failed catalog
        Error: Could not retrieve catalog; skipping run
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 31.92 seconds
      Exited: 1
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:22$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:23$ cat /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
        --- !ruby/object:Puppet::Transaction::Report
        host: mfellvcjncqc2yd.delivery.puppetlabs.net
        time: '2017-08-09T02:18:15.187234890Z'
        configuration_version:
        transaction_uuid: efad460b-b33a-4c92-8048-c7ebd370a9d3
        report_format: 7
        puppet_version: 5.0.1
        status: failed
        noop: false
        noop_pending: false
        environment: production
        logs:
        - level: warning
          message: Could not select a functional puppet master
          source: Puppet
          tags:
          - warning
          time: '2017-08-09T02:18:15.226992187Z'
          file:
          line:
        - level: warning
          message: 'Unable to fetch my node definition, but the agent run will continue:'
          source: Puppet
          tags:
          - warning
          time: '2017-08-09T02:18:20.232278269Z'
          file:
          line:
        - level: warning
          message: execution expired
          source: Puppet
          tags:
          - warning
          time: '2017-08-09T02:18:20.232446871Z'
          file:
          line:
        - level: info
          message: Retrieving pluginfacts
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:20.232872231Z'
          file:
          line:
        - level: err
          message: 'Failed to generate additional resources using ''eval_generate'': execution
            expired'
          source: "/File[/opt/puppetlabs/puppet/cache/facts.d]"
          tags:
          - err
          - file
          - pluginfacts
          time: '2017-08-09T02:18:25.289693940Z'
          file:
          line:
        - level: err
          message: 'Could not evaluate: Could not retrieve file metadata for puppet:///pluginfacts:
            execution expired'
          source: "/File[/opt/puppetlabs/puppet/cache/facts.d]"
          tags:
          - err
          - file
          - pluginfacts
          time: '2017-08-09T02:18:30.295165657Z'
          file:
          line:
        - level: info
          message: Retrieving plugin
          source: Puppet
          tags:
          - info
          time: '2017-08-09T02:18:30.295499200Z'
          file:
          line:
        - level: err
          message: 'Failed to generate additional resources using ''eval_generate'': execution
            expired'
          source: "/File[/opt/puppetlabs/puppet/cache/lib]"
          tags:
          - err
          - file
          - plugin
          time: '2017-08-09T02:18:35.302167017Z'
          file:
          line:
        - level: err
          message: 'Could not evaluate: Could not retrieve file metadata for puppet:///plugins:
            execution expired'
          source: "/File[/opt/puppetlabs/puppet/cache/lib]"
          tags:
          - err
          - file
          - plugin
          time: '2017-08-09T02:18:40.307174305Z'
          file:
          line:
        - level: err
          message: 'Could not retrieve catalog from remote server: execution expired'
          source: Puppet
          tags:
          - err
          time: '2017-08-09T02:18:45.491198155Z'
          file:
          line:
        - level: warning
          message: Not using cache on failed catalog
          source: Puppet
          tags:
          - warning
          time: '2017-08-09T02:18:45.491598733Z'
          file:
          line:
        - level: err
          message: Could not retrieve catalog; skipping run
          source: Puppet
          tags:
          - err
          time: '2017-08-09T02:18:45.491855872Z'
          file:
          line:
        metrics: {}
        resource_statuses: {}
        corrective_change: false
        cached_catalog_status: not_used
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:23$ puppet agent --configprint node_name_value
        mfellvcjncqc2yd.delivery.puppetlabs.net
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.89 seconds
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:24$ rm -rf /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      
      mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  * master_used field should not appear in the report when not using the server_list setting
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:24$ puppet agent -t --server=mfellvcjncqc2yd.delivery.puppetlabs.net
      Info: Using configured environment 'production'
      Info: Retrieving pluginfacts
      Info: Retrieving plugin
      Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
      Info: Applying configuration version '1502245129'
      Notice: Applied catalog in 0.02 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.91 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:25$ puppet agent --configprint node_name_value
      mfellvcjncqc2yd.delivery.puppetlabs.net
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.82 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:26$ cat /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
      --- !ruby/object:Puppet::Transaction::Report
      host: mfellvcjncqc2yd.delivery.puppetlabs.net
      time: '2017-08-09T02:18:48.857047142Z'
      configuration_version: 1502245129
      transaction_uuid: 0f4caf59-f864-4193-a01b-6b65ca403d63
      report_format: 7
      puppet_version: 5.0.1
      status: unchanged
      noop: false
      noop_pending: false
      environment: production
      logs:
      - level: info
        message: Using configured environment 'production'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:18:49.008630957Z'
        file:
        line:
      - level: info
        message: Retrieving pluginfacts
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:18:49.008956317Z'
        file:
        line:
      - level: info
        message: Retrieving plugin
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:18:49.066024360Z'
        file:
        line:
      - level: info
        message: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:18:49.366821511Z'
        file:
        line:
      - level: info
        message: Applying configuration version '1502245129'
        source: Puppet
        tags:
        - info
        time: '2017-08-09T02:18:49.405003610Z'
        file:
        line:
      - level: notice
        message: Applied catalog in 0.02 seconds
        source: Puppet
        tags:
        - notice
        time: '2017-08-09T02:18:49.423675516Z'
        file:
        line:
      metrics:
        resources:
          name: resources
          label: Resources
          values:
          - - total
            - Total
            - 7
          - - skipped
            - Skipped
            - 0
          - - failed
            - Failed
            - 0
          - - failed_to_restart
            - Failed to restart
            - 0
          - - restarted
            - Restarted
            - 0
          - - changed
            - Changed
            - 0
          - - out_of_sync
            - Out of sync
            - 0
          - - scheduled
            - Scheduled
            - 0
          - - corrective_change
            - Corrective change
            - 0
        time:
          name: time
          label: Time
          values:
          - - schedule
            - Schedule
            - 0.000318928
          - - filebucket
            - Filebucket
            - 6.0406e-05
          - - config_retrieval
            - Config retrieval
            - 0.11049581899999339
          - - total
            - Total
            - 0.11087515299999338
        changes:
          name: changes
          label: Changes
          values:
          - - total
            - Total
            - 0
        events:
          name: events
          label: Events
          values:
          - - total
            - Total
            - 0
          - - failure
            - Failure
            - 0
          - - success
            - Success
            - 0
      resource_statuses:
        Schedule[puppet]:
          title: puppet
          file:
          line:
          resource: Schedule[puppet]
          resource_type: Schedule
          containment_path:
          - Schedule[puppet]
          evaluation_time: 5.9338e-05
          tags:
          - schedule
          - puppet
          time: '2017-08-09T02:18:49.410297279Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[hourly]:
          title: hourly
          file:
          line:
          resource: Schedule[hourly]
          resource_type: Schedule
          containment_path:
          - Schedule[hourly]
          evaluation_time: 5.1215e-05
          tags:
          - schedule
          - hourly
          time: '2017-08-09T02:18:49.410457884Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[daily]:
          title: daily
          file:
          line:
          resource: Schedule[daily]
          resource_type: Schedule
          containment_path:
          - Schedule[daily]
          evaluation_time: 4.6936e-05
          tags:
          - schedule
          - daily
          time: '2017-08-09T02:18:49.410609864Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[weekly]:
          title: weekly
          file:
          line:
          resource: Schedule[weekly]
          resource_type: Schedule
          containment_path:
          - Schedule[weekly]
          evaluation_time: 4.8874e-05
          tags:
          - schedule
          - weekly
          time: '2017-08-09T02:18:49.411297500Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[monthly]:
          title: monthly
          file:
          line:
          resource: Schedule[monthly]
          resource_type: Schedule
          containment_path:
          - Schedule[monthly]
          evaluation_time: 6.2749e-05
          tags:
          - schedule
          - monthly
          time: '2017-08-09T02:18:49.411434930Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Schedule[never]:
          title: never
          file:
          line:
          resource: Schedule[never]
          resource_type: Schedule
          containment_path:
          - Schedule[never]
          evaluation_time: 4.9816e-05
          tags:
          - schedule
          - never
          time: '2017-08-09T02:18:49.411603325Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
        Filebucket[puppet]:
          title: puppet
          file:
          line:
          resource: Filebucket[puppet]
          resource_type: Filebucket
          containment_path:
          - Filebucket[puppet]
          evaluation_time: 6.0406e-05
          tags:
          - filebucket
          - puppet
          time: '2017-08-09T02:18:49.412282477Z'
          failed: false
          changed: false
          out_of_sync: false
          skipped: false
          change_count: 0
          out_of_sync_count: 0
          events: []
          corrective_change: false
      corrective_change: false
      catalog_uuid: 0127ff28-6272-4e24-8585-5767481d6d31
      cached_catalog_status: not_used
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.05 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:26$ puppet agent --configprint node_name_value
      mfellvcjncqc2yd.delivery.puppetlabs.net
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.87 seconds
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:27$ rm -rf /tmp/report_dir.tcdkD2/mfellvcjncqc2yd.delivery.puppetlabs.net/*
    
    mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:27$ puppet master --configprint config
    /etc/puppetlabs/puppet/puppet.conf
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.89 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:28$ if [ -f '/tmp/failover_master.rb.t3m3K5/puppet.conf.bak' ]; then cat '/tmp/failover_master.rb.t3m3K5/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/failover_master.rb.t3m3K5/puppet.conf.bak'; fi
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:28$ service puppetserver reload
    Redirecting to /bin/systemctl reload  puppetserver.service
  
  mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 3.21 seconds
Begin teardown

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:31$ rm -rf /tmp/report_dir.tcdkD2

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='tests/reports' name='finalized_on_cycle.rb' time='3.790157'>
      <system-out>
        <![CDATA[
Reports are finalized on resource cycles

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:31$ mktemp -dt report_finalized.XXXXXX
  /tmp/report_finalized.axaVAZ

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:31$ puppet agent --configprint lastrunreport
  /opt/puppetlabs/puppet/cache/state/last_run_report.yaml

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.04 seconds
localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-vtk2ba centos7-64-1:/tmp/report_finalized.axaVAZ/check_report.rb {:ignore => }
localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-16yjps0 centos7-64-1:/tmp/report_finalized.axaVAZ/manifest.pp {:ignore => }

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:33$ puppet apply /tmp/report_finalized.axaVAZ/manifest.pp
  Notice: Compiled catalog for mfellvcjncqc2yd.delivery.puppetlabs.net in environment production in 0.03 seconds
  Error: Found 1 dependency cycle:
  (Notify[bar] => Notify[foo] => Notify[bar])
  Try the '--graph' option and opening the resulting '.dot' file in OmniGraffle or GraphViz
  Error: Failed to apply catalog: One or more resource dependency cycles detected in graph

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 1.57 seconds
Exited: 1

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:34$ env PATH="/opt/puppetlabs/puppet/bin:${PATH}" ruby /tmp/report_finalized.axaVAZ/check_report.rb /opt/puppetlabs/puppet/cache/state/last_run_report.yaml

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.91 seconds
Begin teardown
End teardown
]]>
      </system-out>
    </testcase>
    <testcase classname='tests/reports' name='submission.rb' time='17.238041'>
      <system-out>
        <![CDATA[
Report submission

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:35$ puppet master --configprint user
  puppet

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.79 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:36$ getent passwd puppet
  puppet:x:996:994:puppetserver daemon:/opt/puppetlabs/server/data/puppetserver:/sbin/nologin

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:36$ mktemp -dt report_submission.XXXXXX
  /tmp/report_submission.FIGQ2G

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:36$ chown puppet:puppet /tmp/report_submission.FIGQ2G

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:36$ mktemp -dt submission.rb.XXXXXX
  /tmp/submission.rb.n0yiZV

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
Setting curl retries to 30

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:36$ puppet master --configprint confdir
  /etc/puppetlabs/puppet

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:37$ puppet master --configprint vardir
  /opt/puppetlabs/server/data/puppetserver

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:38$ test -e /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:38$ cat /etc/puppetlabs/puppetserver/conf.d/puppetserver.conf
  {
    "jruby-puppet": {
      "ruby-load-path": [
        "/opt/puppetlabs/puppet/lib/ruby/vendor_ruby"
      ],
      "gem-home": "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
      "gem-path": [
        "/opt/puppetlabs/server/data/puppetserver/jruby-gems",
        "/opt/puppetlabs/server/data/puppetserver/vendored-jruby-gems"
      ],
      "master-conf-dir": "/etc/puppetlabs/puppet",
      "master-code-dir": "/etc/puppetlabs/code",
      "master-var-dir": "/opt/puppetlabs/server/data/puppetserver",
      "master-run-dir": "/var/run/puppetlabs/puppetserver",
      "master-log-dir": "/var/log/puppetlabs/puppetserver"
    },
    "http-client": {
    },
    "profiler": {
    }
  }

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-1yqzbwk centos7-64-1:/etc/puppetlabs/puppetserver/conf.d/puppetserver.conf {:ignore => }

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:38$ puppet master --configprint confdir
  /etc/puppetlabs/puppet

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.98 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:39$ test -e /etc/puppetlabs/puppet/puppet.conf

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:39$ cp /etc/puppetlabs/puppet/puppet.conf /tmp/submission.rb.n0yiZV/puppet.conf.bak

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.04 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:39$ puppet master --configprint config
  /etc/puppetlabs/puppet/puppet.conf

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:40$ puppet master --configprint config
  /etc/puppetlabs/puppet/puppet.conf

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.92 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:41$ cat /etc/puppetlabs/puppet/puppet.conf
  # This file can be used to override the default puppet settings.
  # See the following links for more details on what settings are available:
  # - https://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html
  # - https://docs.puppetlabs.com/puppet/latest/reference/config_about_settings.html
  # - https://docs.puppetlabs.com/puppet/latest/reference/config_file_main.html
  # - https://docs.puppetlabs.com/puppet/latest/reference/configuration.html
  [master]
  vardir = /opt/puppetlabs/server/data/puppetserver
  logdir = /var/log/puppetlabs/puppetserver
  rundir = /var/run/puppetlabs/puppetserver
  pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
  codedir = /etc/puppetlabs/code

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
localhost $ scp /var/folders/8z/d3hkzy8j1wxfbmzwzmpf890w0000gq/T/beaker20170808-6212-8a9z4r centos7-64-1:/tmp/submission.rb.n0yiZV/puppet.conf {:ignore => }

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:41$ cat /etc/puppetlabs/puppet/puppet.conf
  [master]
  vardir = /opt/puppetlabs/server/data/puppetserver
  logdir = /var/log/puppetlabs/puppetserver
  rundir = /var/run/puppetlabs/puppetserver
  pidfile = /var/run/puppetlabs/puppetserver/puppetserver.pid
  codedir = /etc/puppetlabs/code
  
  [main]
  reportdir = /tmp/report_submission.FIGQ2G
  reports = store

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:41$ service puppetserver reload
  Redirecting to /bin/systemctl reload  puppetserver.service

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 3.47 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:45$ puppet agent -t --server mfellvcjncqc2yd.delivery.puppetlabs.net
  Info: Using configured environment 'production'
  Info: Retrieving pluginfacts
  Info: Retrieving plugin
  Info: Caching catalog for mfellvcjncqc2yd.delivery.puppetlabs.net
  Info: Applying configuration version '1502245150'
  Notice: Applied catalog in 0.02 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 2.42 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:47$ puppet agent --configprint node_name_value
  mfellvcjncqc2yd.delivery.puppetlabs.net

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.96 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:48$ grep -q mfellvcjncqc2yd.delivery.puppetlabs.net /tmp/report_submission.FIGQ2G/*/*

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:48$ puppet master --configprint config
  /etc/puppetlabs/puppet/puppet.conf

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.89 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:49$ if [ -f '/tmp/submission.rb.n0yiZV/puppet.conf.bak' ]; then cat '/tmp/submission.rb.n0yiZV/puppet.conf.bak' > '/etc/puppetlabs/puppet/puppet.conf'; rm -f '/tmp/submission.rb.n0yiZV/puppet.conf.bak'; fi

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:49$ service puppetserver reload
  Redirecting to /bin/systemctl reload  puppetserver.service

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 3.35 seconds
Begin teardown

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) 19:23:52$ rm -rf /tmp/report_submission.FIGQ2G

mfellvcjncqc2yd.delivery.puppetlabs.net (centos7-64-1) executed in 0.03 seconds
End teardown
]]>
      </system-out>
    </testcase>
  </testsuite>
</testsuites>